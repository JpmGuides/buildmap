{"version":3,"sources":["/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/$_gendir lazy","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/app.component.css","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/app.component.html","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/app.component.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/app.module.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/text-prop/text-prop.component.css","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/text-prop/text-prop.component.html","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/text-prop/text-prop.component.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/bounding-box.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/edge-prop/edge-prop.component.css","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/edge-prop/edge-prop.component.html","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/edge-prop/edge-prop.component.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/point.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/seq-trip.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/tiles.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-edge.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-graph-editor.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-graph-layer.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-graph.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-map.component.css","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-map.component.html","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-map.component.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-node.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/environments/environment.ts","/Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/main.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"../../../../../frontend/map_editor/src/$$_gendir lazy recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/$$_gendir lazy\n// module id = ../../../../../frontend/map_editor/src/$$_gendir lazy recursive\n// module chunks = main","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/app.component.css\n// module id = ../../../../../frontend/map_editor/src/app/app.component.css\n// module chunks = main","module.exports = \"<trip-map></trip-map>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/app.component.html\n// module id = ../../../../../frontend/map_editor/src/app/app.component.html\n// module chunks = main","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { HttpModule } from '@angular/http';\n\nimport {ColorPickerModule} from 'ngx-color-picker';\n\nimport { AppComponent } from './app.component';\nimport { TripMapComponent } from './trip-map/trip-map.component';\nimport { TextPropComponent } from './text-prop/text-prop.component';\nimport { EdgePropComponent } from './trip-map/edge-prop/edge-prop.component';\n\nimport { ButtonsModule } from 'ngx-bootstrap/buttons';\nimport { AccordionModule } from 'ngx-bootstrap/accordion';\nimport { TabsModule } from 'ngx-bootstrap/tabs';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    TripMapComponent,\n    TextPropComponent,\n    EdgePropComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpModule,\n    ColorPickerModule,\n    AccordionModule.forRoot(),\n    ButtonsModule.forRoot(),\n    TabsModule.forRoot(),\n    BsDropdownModule.forRoot()\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/app.module.ts","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".small {\\n  width: 25px;\\n  height: 25px;\\n}\\n\\n.root > div {\\n  position: relative;\\n}\\n\\ninput {\\ndisplay: inline-block;\\n}\\n\\ninput[type=\\\"number\\\"] {\\n  width: 5em;\\n}\\n\\ni.fa-recycle {\\n  float: right;\\n}\\n\\n.text-prop-colors {\\n  position: relative;\\n  padding: 5px 0px;\\n}\\n\\n.text-prop-colors span {\\n  position: absolute;\\n  left:40px;\\n  top:7px;\\n}\\n\\n.font-size-margin {\\n  margin: 5px 0px 8px;\\n}\\n\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/text-prop/text-prop.component.css\n// module id = ../../../../../frontend/map_editor/src/app/text-prop/text-prop.component.css\n// module chunks = main","module.exports = \"<div *ngIf=\\\"properties\\\" class=\\\"root\\\">\\n  <div class=\\\"font-size-margin\\\">\\n    <span for=\\\"fontSize\\\">Font size:</span>\\n    <input id=\\\"fontSize\\\" type=\\\"number\\\" min=\\\"5\\\" max=\\\"64\\\"\\n           (change)=\\\"setProperty('fontSize')\\\"\\n           [(ngModel)]=\\\"fontSize\\\"\\n           class=\\\"form-control\\\"\\n           />\\n\\n    <i *ngIf=\\\"!hasDefault() && !noReset\\\"\\n       class=\\\"fa fa-recycle\\\"\\n       style=\\\"font-size: 14pt\\\"\\n       (click)=\\\"resetToDefault()\\\"\\n       ></i>\\n  </div>\\n\\n  <div class=\\\"text-prop-colors\\\">\\n    <input [(colorPicker)]=\\\"fill\\\"\\n           (colorPickerChange)=\\\"setProperty('fill')\\\"\\n           [style.background]=\\\"fill\\\"\\n           class=\\\"small form-control\\\"\\n            />\\n    <span>Text color</span>\\n  </div>\\n\\n  <div class=\\\"text-prop-colors\\\">\\n    <input [(colorPicker)]=\\\"stroke\\\"\\n           (colorPickerChange)=\\\"setProperty('stroke')\\\"\\n           [style.background]=\\\"stroke\\\"\\n           class=\\\"small form-control\\\"\\n            />\\n    <span>Shadow color</span>\\n  </div>\\n\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/text-prop/text-prop.component.html\n// module id = ../../../../../frontend/map_editor/src/app/text-prop/text-prop.component.html\n// module chunks = main","import { Component, Input, Output, DoCheck, KeyValueDiffers, EventEmitter } from '@angular/core';\nimport { ColorPickerService, Hsva, Rgba } from 'ngx-color-picker';\n\nimport { TripNodeProperties } from '../trip-map/trip-node';\n\nimport {IPoint, Point} from '../trip-map/point';\n\n@Component({\n  selector: 'text-prop',\n  templateUrl: 'text-prop.component.html',\n  styleUrls: ['./text-prop.component.css']\n})\nexport class TextPropComponent {\n  @Input() @Output() properties: TripNodeProperties;\n  @Input() defaults?: TripNodeProperties;\n  @Input() noReset?: boolean;\n  @Output() onChange: EventEmitter<TripNodeProperties> = new EventEmitter();\n\n  private fill: string;\n  private stroke: string;\n  private fontSize: number;\n\n  private defaultsDiffer: any;\n  private propertiesDiffer: any;\n\n  constructor(private cpService: ColorPickerService,\n              private differs: KeyValueDiffers) {\n    this.defaultsDiffer = differs.find({}).create(null);\n    this.propertiesDiffer = differs.find({}).create(null);\n  }\n\n  ngOnInit() { }\n\n  changeEvent() {\n    this.onChange.emit(this.properties);\n  }\n\n  ngDoCheck() {\n    let changed =\n      this.defaultsDiffer.diff(this.defaults)\n      || this.propertiesDiffer.diff(this.properties);\n    if (changed) {\n      this.readProperties();\n    }\n    return changed;\n  }\n\n  readProperties() {\n    for (let prop of ['fill', 'stroke', 'fontSize']) {\n      if (this.properties && prop in this.properties) {\n        this[prop] = this.properties[prop];\n      } else if (this.defaults && prop in this.defaults) {\n        this[prop] = this.defaults[prop];\n      } else if (prop == 'stroke' || prop == 'fill') {\n        this[prop] = '#000000';\n      } else {\n        this[prop] = undefined;\n      }\n    }\n  }\n\n  hasDefault() {\n    for (let prop of ['fill', 'stroke', 'fontSize']) {\n      if (prop in this.properties) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  setProperty(id: string) {\n    this.properties[id] = this[id];\n    this.changeEvent();\n  }\n\n  resetToDefault() {\n    for (let field of ['fill', 'stroke', 'fontSize']) {\n      delete this.properties[field];\n    }\n    this.readProperties();\n    this.changeEvent();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/text-prop/text-prop.component.ts","\nimport { Point, IPoint } from './point';\n\nexport class BoundingBox {\n  min?: Point;\n  max?: Point;\n\n  static closestPoint(point: Point, bbox: BoundingBox) {\n    const r = new Point(0, 0);\n\n    for (const i in r) {\n      if (point[i] < bbox.min[i]) {\n        r[i] = bbox.min[i];\n      } else if (point[i] > bbox.max[i]) {\n        r[i] = bbox.max[i];\n      } else {\n        r[i] = point[i];\n      }\n    }\n    return r;\n  };\n\n  static overlaps(a: BoundingBox, b: BoundingBox): boolean {\n    if (a.max.x < b.min.x // a is left of b\n        || a.min.x > b.max.x // a is right of b\n        || a.max.y < b.min.y // a is above b\n        || a.min.y > b.max.y) { // a is below b\n      return false;\n    }\n    return true; // boxes overlap\n  }\n\n  static contains(box: BoundingBox, p: IPoint): boolean {\n    return ((p.x >= box.min.x) && (p.x <= box.max.x)\n            && (p.y >= box.min.y) && (p.y <= box.max.y));\n  }\n\n  constructor(obj?: {min?: IPoint, max?: IPoint}) {\n    if (obj) {\n      if (obj.min) { this.min = new Point(obj.min); }\n      if (obj.max) { this.max = new Point(obj.max); }\n    }\n  }\n  addPoint(p: Point) {\n    this.min = (this.min === undefined ? p : Point.min(this.min, p));\n    this.max = (this.max === undefined ? p : Point.max(this.max, p));\n  }\n\n  addArray(a: Point[]) {\n    for (const p of a) {\n      this.addPoint(p);\n    }\n  }\n\n  overlaps(other: BoundingBox): boolean {\n    return BoundingBox.overlaps(this, other);\n  }\n\n  contains(p: IPoint): boolean { return BoundingBox.contains(this, p); }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/bounding-box.ts","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".form-control {\\n  width: 10em;\\n  display: inline-block;\\n}\\n\\n.small { width: 25px; height: 25px; }\\n\\n.edge-prop-colors {\\n  position: relative;\\n  padding: 5px 0px;\\n}\\n\\n.edge-prop-colors span {\\n  position: absolute;\\n  left:40px;\\n  top:7px;\\n}\\n\\n.input-form-control-margin {\\n  margin:10px 0px\\n}\\n\\n\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/edge-prop/edge-prop.component.css\n// module id = ../../../../../frontend/map_editor/src/app/trip-map/edge-prop/edge-prop.component.css\n// module chunks = main","module.exports = \"\\n<div *ngIf=\\\"properties\\\" class=\\\"form-horizontal\\\">\\n  <i\\n     *ngIf=\\\"!hasDefault() && !noReset\\\"\\n     class=\\\"fa fa-recycle pull-right\\\"\\n     style=\\\"font-size: 14pt\\\"\\n     (click)=\\\"resetToDefault()\\\"\\n     ></i>\\n   <div class=\\\"form-group\\\">\\n    <div class=\\\"col-md-4\\\">Transport:</div>\\n    <div class=\\\"col-md-4\\\">\\n      <select class=\\\"form-control\\\" [ngModel]=\\\"travelMean\\\" (change)=\\\"setTravelMean($event.target.value)\\\">\\n      <option *ngFor=\\\"let x of allTravelMeans\\\"\\n              class=\\\"form-control\\\"\\n              [value]=\\\"x\\\"\\n              >{{x}}</option>\\n      </select>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <div for=\\\"lineWidth\\\" class=\\\"col-md-4\\\">Line width:</div>\\n    <div class=\\\"col-md-4\\\">\\n    <input id=\\\"lineWidth\\\" type=\\\"number\\\" min=\\\"0\\\" max=\\\"10\\\"\\n           (change)=\\\"changeEvent()\\\"\\n           [(ngModel)]=\\\"lineWidth\\\"\\n           class=\\\"form-control\\\"\\n           />\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <div class=\\\"col-md-4\\\">Line style:</div>\\n    <div class=\\\"col-md-4\\\">\\n      <select class=\\\"form-control\\\" [ngModel]=\\\"lineStyle\\\" (change)=\\\"setLineStyle($event.target.value)\\\">\\n      <option *ngFor=\\\"let x of allLineStyles\\\"\\n              class=\\\"form-control\\\"\\n              required\\n              [value]=\\\"x.name\\\"\\n              >{{x.name}}</option>\\n      </select>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <div class=\\\"col-md-4\\\">Line shape:</div>\\n    <div class=\\\"col-md-4\\\">\\n      <select class=\\\"form-control\\\" [ngModel]=\\\"geom\\\" (change)=\\\"setGeom($event.target.value)\\\">\\n      <option class=\\\"form-control\\\" [value]=\\\"'straight'\\\">Straight</option>\\n      <option class=\\\"form-control\\\" [value]=\\\"'spline'\\\">Curved</option>\\n      </select>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"edge-prop-colors\\\">\\n    <input [(colorPicker)]=\\\"lineColor\\\"\\n           (colorPickerChange)=\\\"colorChanged()\\\"\\n           [style.background]=\\\"lineColor\\\"\\n           class=\\\"small form-control\\\"\\n            />\\n    <span>Line color</span>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/edge-prop/edge-prop.component.html\n// module id = ../../../../../frontend/map_editor/src/app/trip-map/edge-prop/edge-prop.component.html\n// module chunks = main","import { Component, Input, Output, OnInit, EventEmitter, DoCheck, KeyValueDiffers } from '@angular/core';\n\nimport { TripEdgeProperties } from '../trip-edge';\n\nclass LineStyle {\n  name: string;\n  style: number[];\n\n  key() : string { return name; }\n\n  constructor(n: string, s: number[]) {\n    this.name = n.replace(/-/g, '\\u2501').replace(/ /g, ' \\u00A0');\n    this.style = s;\n  }\n}\n\n@Component({\n  selector: 'edge-prop',\n  templateUrl: 'edge-prop.component.html',\n  styleUrls: [ 'edge-prop.component.css' ],\n})\nexport class EdgePropComponent implements OnInit {\n  @Input() @Output() properties?: TripEdgeProperties;\n  @Input() defaults?: TripEdgeProperties;\n  @Input() noReset?: boolean;\n  @Output() onChange: EventEmitter<TripEdgeProperties> = new EventEmitter();\n\n  private lineColor: string;\n  private lineWidth: number;\n  private travelMean: string;\n\n  private defaultsDiffer: any;\n  private propertiesDiffer: any;\n  private allLineStyles: LineStyle[];\n  private lineStyle: string;\n  private allTravelMeans: string[];\n  private geom: string;\n\n  constructor(private differs: KeyValueDiffers) {\n    this.defaultsDiffer = differs.find({}).create(null);\n    this.propertiesDiffer = differs.find({}).create(null);\n\n    this.allLineStyles = [\n      new LineStyle('------', []),\n      new LineStyle('- - - ', [4, 4]),\n      new LineStyle('--  --', [8, 8])\n    ];\n\n    this.allTravelMeans = [\n      'Unspecified',\n      'Bike',\n      'Boat',\n      'Bus',\n      'Car',\n      'Helicopter',\n      'Plane',\n      'Train',\n      'Walk'\n    ];\n  }\n\n  changeEvent() {\n    this.setProp('lineWidth');\n    this.onChange.emit(this.properties);\n  }\n\n  ngOnInit() {\n    this.readProperties();\n  }\n\n  ngDoCheck() {\n    let changed =\n      this.defaultsDiffer.diff(this.defaults)\n      || this.propertiesDiffer.diff(this.properties);\n    if (changed) {\n      this.readProperties();\n    }\n    return changed;\n  }\n\n  readProperties() {\n    const defaults = {\n      lineColor: '#000000',\n      lineWidth: 2,\n      travelMean: 'Unspecified',\n      geom: 'straight'\n    };\n    for (let field of Object.keys(defaults)) {\n      if (this.properties && field in this.properties) {\n        this[field] = this.properties[field];\n      } else if (this.defaults\n                 && field in this.defaults) {\n        this[field] = this.defaults[field];\n      } else {\n        this[field] = defaults[field];\n      }\n    }\n\n    let dashed;\n    if (this.properties && this.properties.dashed) {\n      dashed = this.properties.dashed;\n    } else if (this.defaults && this.defaults.dashed) {\n      dashed = this.defaults.dashed;\n    }\n    if (dashed) {\n      for (let s of this.allLineStyles) {\n        if (this.sameStyles(s.style, dashed)) {\n          this.lineStyle = s.name;\n        }\n      }\n    } else {\n      this.lineStyle = this.allLineStyles[0].name;\n    }\n  }\n\n  sameStyles(a?: number[], b?: number[]) : boolean {\n    if (!a || !b) {\n      return false;\n    }\n    if (a === b) {\n      return true;\n    }\n    if (a.length != b.length) {\n      return false;\n    }\n    for (let i = 0; i < a.length; ++i) {\n      if (a[i] != b[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  setProp(field: string) {\n    if (this.properties) {\n      if (this.defaults\n          && this[field] === this.defaults[field]) {\n        if (this.properties[field]) {\n          delete this.properties[field];\n        }\n      } else {\n        this.properties[field] = this[field];\n      }\n    }\n  }\n\n  colorChanged() {\n    this.setProp('lineColor');\n    this.changeEvent();\n  }\n  \n  resetToDefault() {\n    for (let field of Object.keys(this.properties)) {\n      delete this.properties[field];\n    }\n    this.readProperties();\n    this.changeEvent();\n  }\n\n  hasDefault() {\n    const fields = [ 'lineColor', 'lineWidth', 'travelMean', 'dashed' ];\n    for (let f of fields) {\n      if (f in this.properties) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  setLineStyle(style: string) {\n    for (let s of this.allLineStyles) {\n      if (s.name === style) {\n        this.properties.dashed = s.style;\n      }\n    }\n    this.changeEvent();\n  }\n\n  setTravelMean(travelMean: string) {\n    this.travelMean = travelMean;\n    this.setProp('travelMean');\n    this.changeEvent();\n  }\n\n  setGeom(geomStyle: string) {\n    this.geom = geomStyle;\n    this.setProp('geom');\n    this.changeEvent();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/edge-prop/edge-prop.component.ts","export interface IPoint {\n  x: number;\n  y: number;\n};\n\nexport class Point implements IPoint {\n  x: number;\n  y: number;\n\n  static minus(a: IPoint, b: IPoint) { return new Point(a.x - b.x, a.y - b.y); };\n  static plus(a: IPoint, b: IPoint) { return new Point(a.x + b.x, a.y + b.y); };\n  static times(t: number, a: IPoint) { return new Point(t * a.x, t * a.y); };\n  static min(a: Point, b: Point) {\n    return new Point(Math.min(a.x, b.x), Math.min(a.y, b.y));\n  };\n  static max(a: IPoint, b: IPoint) {\n    return new Point(Math.max(a.x, b.x), Math.max(a.y, b.y));\n  };\n\n  static dist(a: IPoint, b: IPoint) {\n    const dx = a.x - b.x;\n    const dy = a.y - b.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  };\n\n  static norm(a: IPoint): number { return Math.sqrt(a.x * a.x + a.y * a.y); };\n\n  static nearest(target: IPoint, points: Point[]): Point | undefined {\n    let best;\n    let bestDist;\n    for (let p of points) {\n      const dist = Point.dist(p, target);\n      if (best === undefined || dist < bestDist) {\n        bestDist = dist;\n        best = p;\n      }\n    }\n    return best;\n  };\n\n  constructor(x: IPoint | number[] | number, y?: number) {\n    if (typeof(x) === 'number' && typeof(y) === 'number') {\n      this.x = x;\n      this.y = y;\n    } else if (Array.isArray(x)) {\n      this.x = x[0];\n      this.y = x[1];\n    } else if (typeof(x) === 'object') {\n      this.x = x.x;\n      this.y = x.y;\n    }\n    if (this.x === undefined || this.y === undefined) {\n      throw(new Error('invalid point'));\n    }\n  }\n\n  add(p: IPoint) { this.x += p.x; this.y += p.y; return this; };\n  sub(p: IPoint) { this.x -= p.x; this.y -= p.y; return this; };\n  mul(t: number) { this.x *= t; this.y *= t; return this; };\n\n  norm(): number { return Point.norm(this); };\n};\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/point.ts","import { Point, IPoint } from './point';\nimport { TripEdge, TripEdgeProperties } from './trip-edge';\nimport { TripGraph } from './trip-graph';\nimport { TripNode, TripNodeProperties, ITripNode } from './trip-node';\nimport { TripSaved } from './trip-saved';\nimport { TripGraphLayer } from './trip-graph-layer';\nimport * as Tiles from './tiles';\n\nexport class SeqTrip {\n  public _tripData: TripSaved;\n\n  constructor() {\n    this.reset();\n  }\n\n  private static makePlaneIcon(verb: string, placeNode: TripNode): TripNode {\n    const iconNode = new TripNode();\n    iconNode.name = placeNode.dbid + '-' + verb,\n    iconNode.labelIcon = {\n        url: '/ng-map/assets/plane.png',\n        width: 20,\n        autorotate: (Math.PI / 2) * (verb === 'landing' ? 1 : -1),\n        ratioX: .5,\n        ratioY: (verb === 'landing' ? 0 : 1),\n    };\n    iconNode.coord = placeNode.coord;\n    iconNode.properties = {\n        point: false,\n        leaderLine: 'center',\n        dashed: [5, 3],\n        leaderLineWidth: 2,\n        maxLeaderLineLength: 2\n    };\n    return iconNode;\n  }\n\n  places(): TripNode[] {\n    return this._tripData.places;\n  }\n\n  stages(): TripEdge[] {\n    return this._tripData.stages;\n  }\n\n  setLocation(loc: Tiles.Location) { this._tripData.location = loc; }\n  location(): Tiles.Location { return this._tripData.location; }\n\n  width_mm(): number { return this._tripData.width; }\n  height_mm(): number { return this._tripData.height; }\n  pageSizeName(): string { return this._tripData.pageSizeName; }\n  world(): any {\n    if (!this._tripData.world) {\n      this._tripData.world = {};\n    }\n    return this._tripData.world;\n  }\n\n  setSize(name: string, width_mm: number, height_mm: number) {\n    this._tripData.width = width_mm;\n    this._tripData.height = height_mm;\n    this._tripData.pageSizeName = name;\n  }\n\n  defaultRadius(): number { return this._tripData.defaultRadius; }\n\n  defaultTextProp(): any {\n    if (!this._tripData.defaultTextProp) {\n      this._tripData.defaultTextProp = { };\n    }\n    return this._tripData.defaultTextProp;\n  }\n\n  defaultEdgeProp(): TripEdgeProperties {\n    if (!this._tripData.defaultEdgeProp) {\n      this._tripData.defaultEdgeProp =\n        SeqTrip.defaultTrip().defaultEdgeProp;\n    }\n    return this._tripData.defaultEdgeProp;\n  }\n\n  reset() {\n    this._tripData = SeqTrip.defaultTrip();\n  }\n\n  static defaultTrip() : TripSaved {\n    return {\n      places: [],\n      stages: [],\n      additionalPlaces: [],\n      location: { x: .5, y: .5, scale: 1/8 },\n      defaultRadius: 8,\n      width: 128,\n      height: 190,\n      pageSizeName: 'Full page',\n      borderColor: '#fefefe',\n      landColor: '#cecece',\n      seaColor: '#c4e3ff',\n      showRivers: false,\n      world: { },\n      defaultTextProp: {\n        fontSize: 12,\n        font: \"'PT Sans', sans-serif\",\n        stroke: 'rgba(255,255,255,.8)',\n        fill: '#000000'\n      },\n      defaultEdgeProp: {\n        lineWidth: 2,\n        lineColor: '#000000',\n        geom: 'straight'\n      }\n    };\n  }\n\n\n  setPlaces(places: TripNode[]) {\n    // we preserve the same array, in order not to invalidate references\n    this._tripData.places.splice.apply(\n        this._tripData.places,\n        ([0, this._tripData.places.length] as any[]).concat(places));\n    this.updateStages();\n    this.updateLandingsAndTakeoff();\n  }\n\n  public stagesAsDict() : { [id: string] : { [id: string] : TripEdge } } {\n    const edgeStart : { [id: string] : { [id: string] : TripEdge } } = {};\n    for (let s of this._tripData.stages) {\n      if (!(s.from in edgeStart)) {\n        edgeStart[s.from] = { };\n      }\n      edgeStart[s.from][s.to] = s;\n    }\n    return edgeStart;\n  }\n\n  private updateStages() {\n    const places = this._tripData.places;\n    const numStages = places.length - 1;\n    const stages = this._tripData.stages;\n    const newStages = [];\n    const stageDict = this.stagesAsDict();\n\n    for (let i = 1; i <= numStages; ++i) {\n      const fromDbId = places[i - 1].dbid;\n      const toDbId = places[i].dbid;\n\n      if (stageDict[fromDbId] && stageDict[fromDbId][toDbId]) {\n        const existing = stageDict[fromDbId][toDbId];\n        existing.to = places[i].name;\n        newStages.push(existing);\n      } else {\n        newStages.push(new TripEdge({\n          from: places[i - 1].name,\n          to: places[i].name,\n          fromDbId: fromDbId,\n          controlPoints: TripGraph.generateControlPoints(\n              (i >= 2 ? places[i - 2].coord : undefined),\n              places[i - 1].coord,\n              places[i].coord,\n              ((i + 1) < places.length ? places[i + 1].coord : undefined)\n              )\n        }));\n      }\n    }\n    // we preserve the same array, in order not to invalidate references\n    this._tripData.stages.splice.apply(\n      this._tripData.stages,\n      [0, this._tripData.stages.length].concat(newStages));\n  }\n\n  private updateLandingsAndTakeoff() {\n    const index : { [key: string]: number } = { };\n    const additionalPlaces = this._tripData.additionalPlaces;\n\n    for (let i = 0; i < additionalPlaces.length; ++i) {\n      index[additionalPlaces[i].name] = i;\n    }\n\n    const placesToAdd : TripNode[] = [];\n    const placesToRemove: { [key: string]: boolean } = {};\n    const placesToKeep: { [key: string]: boolean } = {};\n\n    const verbs = ['landing', 'takeoff'];\n\n    for (let n of this._tripData.places) {\n      for (let verb of verbs) {\n        const name = n.dbid + '-' + verb;\n        placesToKeep[name] = true;\n        if (n.properties[verb]) {\n          // landing/takeoff wanted\n          if (!(name in index)) {\n            placesToAdd.push(SeqTrip.makePlaneIcon(verb, n));\n          }\n        } else {\n          // landing/takeoff not wanted\n          if (name in index) {\n            placesToRemove[name] = true;\n          }\n        }\n      }\n    }\n\n    const landingTakeoffRegex = /-(landing|takeoff)$/;\n    const newPlaces =\n      additionalPlaces.filter((n : TripNode) => {\n          if (n.name in placesToRemove) {\n            return false;\n          }\n          if (n.name in placesToKeep) {\n            return true;\n          }\n          return n.name.match(landingTakeoffRegex) == null;\n        })\n      .concat(placesToAdd);\n\n    this._tripData.additionalPlaces.splice.apply(\n        this._tripData.additionalPlaces,\n        ([0, this._tripData.additionalPlaces.length] as any[]).concat(newPlaces));\n  }\n\n  nodeRadius(node: TripNode, pixelRatio: number): number {\n    let r = this._tripData.defaultRadius;\n    if (node.properties && node.properties.radius) {\n      r = node.properties.radius;\n    }\n    return r * pixelRatio;\n  };\n\n  makeGraph(tripLayer?: TripGraphLayer): TripGraph {\n    const renameDict = {};\n    const fuseNodePair = function(a, b) {\n      const r : TripNode = TripNode.parse(a);\n      r.name = a.name + ',' + b.name;\n      r.allPlaces = a.allPlaces.concat([ b ]);\n\n      const labels = a.label.split('\\n');\n      if (labels.indexOf(b.label) < 0) {\n        labels.push(b.label);\n      }\n      r.label = labels.join('\\n');\n      renameDict[a.name] = renameDict[b.name] = r.name;\n      return r;\n    };\n\n    const lookup = function(name) {\n      let r = name;\n      while (r in renameDict) {\n        r = renameDict[r];\n      }\n      return r;\n    };\n\n    for (let n of this._tripData.places) {\n      if (!n.name) {\n        throw(new Error('nodes should have names and labels'));\n      }\n    }\n\n    const keptNodes : TripNode[] = [];\n    if (tripLayer) {\n      const pinchZoom = tripLayer.renderer.pinchZoom;\n      const pixelRatio = tripLayer.renderer.pixelRatio;\n\n      for (let node of this._tripData.places) {\n        node.viewerPos = pinchZoom.viewerPosFromWorldPos(node.coord);\n      }\n\n      for (let node of this._tripData.places) {\n        if (!node.label || (node.properties && node.properties.skip)) {\n          continue;\n        }\n\n        const r = this.nodeRadius(node, pixelRatio);\n        let keep = true;\n\n        for (let i = 0; i < keptNodes.length; ++i) {\n          const n = keptNodes[i];\n          const dist = Point.dist(n.viewerPos, node.viewerPos);\n          if (dist < (this.nodeRadius(n, pixelRatio) + r)) {\n            keptNodes[i] = fuseNodePair(n, node);\n            keep = false;\n            break;\n          }\n        }\n        if (keep) {\n          if (!node.properties) {\n            node.properties = {};\n          }\n          const newNode = TripNode.parse(node);\n          newNode.place = node;\n          newNode.allPlaces = [ node ];\n          keptNodes.push(newNode);\n        }\n      }\n    } else {\n      for (let node of this._tripData.places) {\n        const newNode = TripNode.parse(node);\n        newNode.place = node;\n        newNode.allPlaces = [ node ];\n        keptNodes.push(newNode);\n      }\n    }\n\n    const places = this._tripData.places;\n    const placeIndex : { [key: string]: number } = {};\n    for (let i = 0; i < places.length; ++i) {\n      const n = places[i];\n      placeIndex[n.name] = i;\n    }\n\n    const result = new TripGraph(undefined, this._tripData.defaultEdgeProp);\n\n    for (let n of keptNodes) {\n      result.nodes[n.name] = n;\n    }\n\n    this.updateLandingsAndTakeoff();\n    for (let n of this._tripData.additionalPlaces) {\n      result.nodes[n.name] = n;\n    }\n\n    for (let edge of this._tripData.stages) {\n      if (edge.properties.hidden || places[placeIndex[edge.from]].isSkipped()) {\n        continue;\n      }\n      const nameFrom = lookup(edge.from);\n\n      let to = placeIndex[edge.to];\n      while (to < places.length && places[to].isSkipped()) {\n        ++to;\n      }\n      if (to >= places.length || places[to].isSkipped()) {\n        continue;\n      }\n      const nameTo = lookup(places[to].name);\n\n      if (nameFrom !== nameTo) {\n        const newEdge = TripGraphLayer.shallowCopy(edge);\n        newEdge.from = nameFrom;\n        newEdge.to = nameTo;\n        newEdge.originalEdge = edge;\n        result.edges.push(newEdge);\n      }\n    }\n    return result;\n  }\n\n  save(): TripSaved { return this._tripData; }\n\n  load(data: any) {\n    if (!data || !data.places || !data.stages) {\n      throw new Error('no data');\n    }\n\n    const newTripData = data as TripSaved;\n\n    const parseNodeArray = (places: TripNode[]) => {\n      for (let i = 0; i < places.length; ++i) {\n        places[i] = TripNode.parse(places[i]);\n      }\n    };\n\n    parseNodeArray(newTripData.places);\n    const edges = newTripData.stages;\n    for (let i = 0; i < edges.length; ++i) {\n      edges[i] = new TripEdge(edges[i]);\n    }\n\n    parseNodeArray(newTripData.additionalPlaces);\n\n    this._tripData = newTripData;\n    this.defaultEdgeProp();\n    this.setSize(data.pageSizeName, data.width, data.height);\n  };\n\n  seaColor() : string { return this._tripData.seaColor; }\n  setSeaColor(c: string) {\n    this._tripData.seaColor = c;\n  }\n  landColor() : string {\n    return this._tripData.landColor;\n  }\n  setLandColor(c: string) { this._tripData.landColor = c; }\n  borderColor() : string { return this._tripData.borderColor; }\n  setBorderColor(c: string) { this._tripData.borderColor = c; }\n  showRivers() : boolean { return this._tripData.showRivers; }\n  toggleShowRiver() { this._tripData.showRivers = !this._tripData.showRivers; }\n\n  placeByName(name: string): TripNode {\n    for (let n of this._tripData.places) {\n      if (name === n.name) {\n        return n;\n      }\n    }\n  }\n\n  markFirstLocation() {\n    let first = true;\n    for (let node of this._tripData.places) {\n      if (!node.label || (node.properties && node.properties.skip)) {\n        continue;\n      }\n      if (first) {\n        node.properties.firstVisited = true;\n      } else if ('firstVisited' in node.properties) {\n        delete node.properties.firstVisited;\n      }\n      first = false;\n    }\n  }\n\n  clearUserPlacements() {\n    for (let n of this._tripData.additionalPlaces\n         .concat(this._tripData.places)) {\n      if (n.properties && n.properties.userPlacement) {\n        delete n.properties.userPlacement;\n      }\n    }\n  }\n\n  saveUserPlacements() {\n    for (let n of this._tripData.additionalPlaces\n         .concat(this._tripData.places)) {\n      if (!n.properties) {\n        n.properties = { };\n      }\n      if (n.properties.labelCoord) {\n        n.properties.userPlacement = n.properties.labelCoord;\n      }\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/seq-trip.ts","import {IPoint, Point} from './point';\n\nexport interface Location {\n  x: number,\n  y: number,\n  scale: number\n}\n\nexport interface CanvasTilesRendererParams {\n  url?: string;\n  initialLocation?: Location;\n  canvas: HTMLCanvasElement;\n  onLocationChange?: (renderer: CanvasTilesRenderer) => void;\n  noInteraction?: boolean;\n  clearBorder?: boolean;\n}\n\nexport declare class CanvasTilesRenderer {\n  pixelRatio: number;\n  layers: any[];\n  pinchZoom: PinchZoom;\n  canvas: HTMLCanvasElement;\n  location: Location;\n\n  constructor (parameters: CanvasTilesRendererParams);\n\n  addLayer(l: any);\n  refresh();\n  refreshIfNotMoving();\n\n  setLocation(loc: Location);\n  getLocation(): Location;\n  loadImage(url: string,\n            success: (data: any) => void,\n            failure: (err: string) => void);\n}\n\nexport interface Constraint {\n  viewer: { x: number, y: number };\n  world: { x: number, y: number };\n}\n\nexport declare class PinchZoom {\n  touchEventHandlers : any[];\n  maxX?: number;\n  maxY?: number;\n  ignoreLimits?: boolean;\n\n  viewerPosFromWorldPos(x : IPoint | number[] | number, y? : number) : Point;\n  worldPosFromViewerPos(x : IPoint | number[] | number, y? : number) : Point;\n  worldDistanceFromViewerDistance(dist: number): number;\n  processConstraints(constraints: Constraint[]);\n\n  locked: boolean;\n}\n\ndeclare var Utils: any;\n\nexport var T = {\n  CanvasTilesRenderer: CanvasTilesRenderer,\n  PinchZoom: PinchZoom, \n  Utils: Utils\n};\n\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/tiles.ts","import { Point } from './point';\n\nexport interface TripEdgeProperties {\n  hidden?: boolean;\n  lineColor?: string;\n  lineWidth?: number;\n  _lineWidth?: number; // used as backup when selecting an edge\n  dashed?: number[];\n  travelMean?: string;\n  geom?: string;\n}\n\nexport class TripEdge {\n  from: string;\n  to: string;\n  controlPoints: Point[];\n  drawMiddlePoint?: boolean;\n  originalEdge?: TripEdge;\n  fromDbId: number;\n  properties: TripEdgeProperties;\n\n  constructor(obj?: any) {\n    this.properties = { };\n\n    if (obj) {\n      if (obj.controlPoints) {\n        this.controlPoints = [];\n        for (let i = 0; i < obj.controlPoints.length; ++i) {\n          this.controlPoints[i] = new Point(obj.controlPoints[i]);\n        }\n      }\n      if (obj.originalEdge) {\n        this.originalEdge = new TripEdge(obj.originalEdge);\n      }\n      for (let m of ['from', 'to', 'drawMiddlePoint', 'properties',\n            'fromDbId' ]) {\n        if (m in obj) {\n          this[m] = obj[m];\n        }\n      }\n    }\n  }\n\n  propagateToOriginal() {\n    if (this.originalEdge) {\n      for (let field of ['controlPoints', 'drawMiddlePoint' ]) {\n        if (field in this) {\n          this.originalEdge[field] = this[field];\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-edge.ts","import { BoundingBox } from './bounding-box';\nimport { IPoint, Point } from './point';\nimport { TripEdge } from './trip-edge';\nimport { TripGraph } from './trip-graph';\nimport { TripGraphLayer } from './trip-graph-layer';\nimport { TripNode, TripNodeProperties } from './trip-node';\nimport { T, Location, CanvasTilesRenderer, CanvasTilesRendererParams, PinchZoom } from './tiles';\n\ninterface BezierEdge {\n  edge: TripEdge;\n}\n\ndeclare var d3: any;\ndeclare var Utils: any;\n\nexport class TripGraphEditor {\n  graph: TripGraph;\n  selectedLabel: TripNode;\n  onLabelSelect: (node: TripNode) => void;\n  renderer: CanvasTilesRenderer;\n\n  selectedBezier: BezierEdge;\n  onBezierSelect?: (bezier: BezierEdge) => void;\n  onBezierMoved?: (bezier: BezierEdge) => void;\n  onLabelMoved?: (node: TripNode) => void;\n\n  private startWorldPos: Point;\n  private applyDelta: (delta: IPoint) => void;\n\n  constructor(renderer: CanvasTilesRenderer, graph: TripGraph) {\n    this.graph = graph;\n    this.renderer = renderer;\n  }\n\n\n  acceptTouchEvent(viewer: IPoint, world: IPoint, type: string) {\n    if (type === 'wheel') {\n      return false;\n    }\n\n    this.startWorldPos = new Point(world);\n    const clickedLabel = this.findLabelAtWorldPos(this.startWorldPos);\n    if (clickedLabel) {\n      this.selectLabel(clickedLabel);\n      const properties = clickedLabel.properties;\n      this.applyDelta = function(delta: IPoint) {\n        properties.labelCoord.x += delta.x;\n        properties.labelCoord.y += delta.y;\n        properties.labelBbox.min.x += delta.x;\n        properties.labelBbox.min.y += delta.y;\n        properties.labelBbox.max.x += delta.x;\n        properties.labelBbox.max.y += delta.y;\n        properties.userPlacement = new Point(properties.labelCoord);\n        TripGraph.placeLeaderLine(clickedLabel);\n        if (this.onLabelMoved) {\n          this.onLabelMoved(clickedLabel);\n        }\n      };\n      return true;\n    } else {\n      const p = this.closestBezier(world);\n\n      const threshold = this.renderer.pinchZoom.worldDistanceFromViewerDistance(\n          10 * this.renderer.pixelRatio);\n\n      if (p && p.d < threshold) {\n        const me = this;\n        const pointToMove = function(ptOrArray?: Point | Point[]) {\n          me.applyDelta = function(delta: IPoint) {\n            if (!ptOrArray) { return; }\n            const a: Point[] =\n              (Array.isArray(ptOrArray) ? ptOrArray : [ptOrArray]);\n            for (let point of a) {\n              point.x += delta.x;\n              point.y += delta.y;\n            }\n            if (this.onBezierMoved) {\n              this.onBezierMoved(p);\n            }\n          };\n        };\n\n        const movePointWithOpposite = function(a, pivot, b) {\n          me.applyDelta = function(delta) {\n            a.x += delta.x;\n            a.y += delta.y;\n            pivot.x += delta.x / 2;\n            pivot.y += delta.y / 2;\n          };\n        };\n\n        if (p.edge.controlPoints.length === 2) {\n          pointToMove(p.edge.controlPoints[p.t < .5 ? 0 : 1]);\n        } else if (p.edge.controlPoints.length === 5) {\n          if (p.bezier.points[1].x === p.edge.controlPoints[0].x\n              && p.bezier.points[1].y === p.edge.controlPoints[0].y) {\n            if (p.t < .5) {\n              pointToMove(p.edge.controlPoints[0]);\n            } else if (p.t < .9) {\n              movePointWithOpposite(p.edge.controlPoints[1],\n                                    p.edge.controlPoints[2],\n                                    p.edge.controlPoints[3]);\n            } else {\n              pointToMove([p.edge.controlPoints[1],\n                          p.edge.controlPoints[2],\n                          p.edge.controlPoints[3]]);\n            }\n          } else {\n            if (p.t < .1) {\n              pointToMove([p.edge.controlPoints[1],\n                          p.edge.controlPoints[2],\n                          p.edge.controlPoints[3]]);\n            } else if (p.t < .5) {\n              movePointWithOpposite(p.edge.controlPoints[3],\n                                    p.edge.controlPoints[2],\n                                    p.edge.controlPoints[1]);\n            } else {\n              pointToMove(p.edge.controlPoints[4]);\n            }\n          }\n        } else {\n          pointToMove(Point.nearest(world, p.edge.controlPoints));\n        }\n        this.selectBezier(p);\n        return true;\n      }\n    }\n\n    this.applyDelta = undefined;\n    return false;\n  };\n\n  selectLabel(label?: TripNode) {\n    if (this.selectedLabel) {\n      delete this.selectedLabel.properties.frame;\n    }\n    this.selectedLabel = undefined;\n    this.selectBezier();\n    this.selectedLabel = label;\n    if (this.onLabelSelect) {\n      this.onLabelSelect(label);\n    }\n    if (label) {\n      label.properties = label.properties || {};\n      label.properties.frame = '#000000';\n    }\n    this.renderer.refreshIfNotMoving();\n  };\n\n  deselectLabel() { return this.selectLabel(); };\n\n  handleMouseDown(event: any) {\n    event.preventDefault();\n  }\n\n  handleMouseMove(event: any) {\n    event.preventDefault();\n    const viewerPos = Utils.eventPosInElementCoordinates(\n        event, event.target || event.srcElement);\n    this.handleMotion(viewerPos);\n  }\n\n  handleMotion(viewerPos: Point) {\n    if (!this.applyDelta) {\n      return;\n    }\n\n    const worldPos = this.renderer.pinchZoom.worldPosFromViewerPos(\n        viewerPos.x, viewerPos.y);\n\n    const delta = {\n      x: worldPos.x - this.startWorldPos.x,\n      y: worldPos.y - this.startWorldPos.y\n    };\n    this.startWorldPos = worldPos;\n\n    this.applyDelta(delta);\n    this.renderer.refreshIfNotMoving();\n  }\n\n  handleMouseUp(event: any) {\n    event.preventDefault();\n    this.applyDelta = undefined;\n  }\n\n  handleMouseWheel(event: any) {\n    event.preventDefault();\n  }\n\n  handleStart(event: any) {\n    event.preventDefault();\n  }\n\n  handleEnd(event: any) {\n    event.preventDefault();\n    this.applyDelta = undefined;\n  }\n\n  handleMove(event: any) {\n    event.preventDefault();\n    if (event.touches.length !== 1) {\n      this.applyDelta = undefined;\n      return;\n    }\n\n    const viewerPos = Utils.eventPosInElementCoordinates(\n        event.touches[0], event.target || event.srcElement);\n    this.handleMotion(viewerPos);\n  }\n\n  closestBezier(p) {\n    let nearest;\n    for (let e of this.graph.edges) {\n      const curves = this.graph.bezier(e);\n      for (let b of curves) {\n        const candidate = b.project(p);\n        if (!nearest || candidate.d < nearest.d) {\n          nearest = candidate;\n          nearest.edge = e;\n          nearest.bezier = b;\n        }\n      }\n    }\n    return nearest;\n  }\n\n  findLabelAtWorldPos(pos: Point): TripNode {\n    const nodes = this.graph.nodes;\n    for (let i in nodes) {\n      if (nodes.hasOwnProperty(i)) {\n        let node = this.graph.nodes[i];\n        if (node.properties && node.properties.labelBbox\n            && BoundingBox.contains(node.properties.labelBbox, pos)) {\n          return node;\n        }\n      }\n    }\n    return undefined;\n  };\n\n  selectBezier(b?: BezierEdge) {\n    if (this.selectedBezier) {\n      const edge = this.selectedBezier.edge;\n      delete edge.drawMiddlePoint;\n      if (edge.properties._lineWidth !== undefined) {\n        edge.properties.lineWidth = edge.properties._lineWidth;\n        delete edge.properties._lineWidth;\n      } else {\n        delete edge.properties.lineWidth;\n      }\n    }\n    this.selectedBezier = b;\n\n    if (b) {\n      const edge = b.edge;\n      edge.drawMiddlePoint = true;\n      if (edge.properties._lineWidth !== undefined) {\n        edge.properties._lineWidth = edge.properties.lineWidth;\n      }\n      edge.properties.lineWidth = 5;\n    }\n    if (this.selectedLabel) {\n      this.deselectLabel();\n    }\n\n    if (this.onBezierSelect) {\n      this.onBezierSelect(this.selectedBezier);\n    }\n    this.renderer.refreshIfNotMoving();\n  }\n\n  /*\n  splitCurve() {\n    if (!this.selectedBezier) {\n      return;\n    }\n\n    const edge = this.selectedBezier.edge;\n\n    this.graph.splitEdge(edge);\n  }\n  */\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-graph-editor.ts","import { TripGraph } from './trip-graph';\nimport { TripEdge, TripEdgeProperties } from './trip-edge';\nimport { TripNode, TripNodeProperties } from './trip-node';\nimport { BoundingBox } from './bounding-box';\nimport { Size2D } from './size2d';\nimport { TripSaved } from './trip-saved';\nimport { Point, IPoint } from './point';\nimport { T, Location, CanvasTilesRenderer, CanvasTilesRendererParams, PinchZoom } from './tiles';\n\ndeclare const d3: any;\ndeclare const Bezier: any;\n\nexport interface TripGraphLayerParams {\n  renderer: CanvasTilesRenderer;\n  graph: TripGraph;\n  defaultRadius?: number;\n  defaultFontSize?: number;\n  defaultEdgeProp?: TripEdgeProperties;\n  hideLabels?: boolean;\n};\n\nexport class TripGraphLayer {\n  public graph: TripGraph;\n  public defaultTextProp: TripNodeProperties;\n  public defaultEdgeProp: TripEdgeProperties;\n\n  public renderer: CanvasTilesRenderer;\n  public defaultRadius: number;\n  private icons: any;\n\n  private iconsToLoad: number;\n  private failedIcons: number;\n  private hideLabels: boolean;\n\n  constructor(private params: TripGraphLayerParams) {\n    this.renderer = params.renderer;\n    this.defaultRadius = params.defaultRadius || 6;\n    this.icons = {};\n    this.defaultTextProp = {\n      fontSize: params.defaultFontSize || 20,\n      stroke: 'rgba(255,255,255,.8)',\n      fill: '#000000'\n    };\n    this.defaultEdgeProp =\n      params.defaultEdgeProp || { lineWidth: 1, lineColor: '#000000' };\n    this.hideLabels = !!params.hideLabels;\n\n    if (!this.renderer) {\n      throw(new Error('TripGraphLayer: no renderer !'));\n    }\n    this.graph = params.graph || new TripGraph(undefined, this.defaultEdgeProp);\n  }\n\n  draw(canvas: any, pinchZoom: any, bboxTopLeft: any, bboxBottomRight: any) {\n    const graph = this.graph;\n    const context = canvas.getContext('2d');\n    const pixelRatio = this.renderer.pixelRatio;\n\n    for (let e of graph.edges) {\n      this.drawEdge(context, pinchZoom, e, pixelRatio, 'curve');\n    }\n    for (let e of graph.edges) {\n      this.drawEdge(context, pinchZoom, e, pixelRatio, 'mark');\n    }\n\n    context.setLineDash([]);\n\n    for (let i in graph.nodes) {\n      const node = graph.nodes[i];\n      node.viewerPos = pinchZoom.viewerPosFromWorldPos(node.coord);\n    }\n\n    for (let i in graph.nodes) {\n      const node = graph.nodes[i];\n      this.drawNodePoint(context, pinchZoom, node);\n    }\n    for (let i in graph.nodes) {\n      if (!this.hideLabels || i.match(/-(takeoff)|(landing)$/)) {\n        const node = graph.nodes[i];\n        this.drawLeaderLine(context, pinchZoom, node);\n      }\n    }\n    for (let i in graph.nodes) {\n      if (!this.hideLabels || i.match(/-(takeoff)|(landing)$/)) {\n        const node = graph.nodes[i];\n        this.drawNodeLabel(context, pinchZoom, node);\n      }\n    }\n  }\n\n  drawEdge(context: CanvasRenderingContext2D, pinchZoom: any,\n           edge: TripEdge, pixelRatio: number, restrict: string) {\n    this.setEdgeStrokeStyle(context, edge);\n\n    const bezierCurves = this.graph.bezier(edge);\n    for (let bezier of bezierCurves ) {\n      this.drawBezier(context, pinchZoom, bezier, pixelRatio, edge, restrict);\n    }\n    if (restrict != 'mark') {\n      if (bezierCurves.length > 1 && edge.drawMiddlePoint) {\n        for (let i in bezierCurves) {\n          const p = pinchZoom.viewerPosFromWorldPos(bezierCurves[i].points[3]);\n          const radius = 5 * pixelRatio;\n          context.beginPath();\n          context.arc(p.x, p.y, radius, 0, 2 * Math.PI, false);\n          context.fillStyle = '#000000';\n          context.fill();\n        }\n      }\n    }\n  }\n\n  drawBezier(context: CanvasRenderingContext2D, pinchZoom: any,\n                    curve: any, pixelRatio: number,\n                    edge: TripEdge, restrict?: string) {\n    context.save();\n\n    const ptArray = new Array(8);\n    const points = curve.points;\n    for (let j = 0; j < 4; ++j) {\n      const p = pinchZoom.viewerPosFromWorldPos(points[j]);\n      ptArray[j * 2] = p.x;\n      ptArray[j * 2 + 1] = p.y;\n    }\n\n    const bezier = new Bezier(ptArray);\n    const l = bezier.length();\n    const numArrows = Math.min(2, Math.floor(l / (pixelRatio * 40)));\n\n    const viewcurve = bezier.points;\n\n    if (restrict != 'mark') {\n      context.beginPath();\n      context.moveTo(viewcurve[0].x, viewcurve[0].y);\n      context.bezierCurveTo(\n          viewcurve[1].x, viewcurve[1].y,\n          viewcurve[2].x, viewcurve[2].y,\n          viewcurve[3].x, viewcurve[3].y);\n\n      context.stroke();\n    }\n\n    for (let i = 1; i < numArrows; ++i) {\n      const t = i / numArrows;\n      let p = new Point(bezier.get(t));\n      const n = new Point(bezier.normal(t));\n      const tangent = new Point(bezier.derivative(t));\n\n      this.drawEdgeMark(p, n, tangent, context, pixelRatio, edge, restrict);\n    }\n    context.restore();\n  }\n\n  drawEdgeMark(p: Point, n: Point, tangent: Point,\n               context: CanvasRenderingContext2D, pixelRatio: number,\n               edge: TripEdge, restrict: string) {\n    const mean = this.edgeProperty(edge, 'travelMean');\n    switch(mean) {\n      case 'Bike':\n      case 'Boat':\n      case 'Bus':\n      case 'Car':\n      case 'Helicopter':\n      case 'Plane':\n      case 'Train':\n      case 'Walk':\n        if (restrict != 'curve') {\n          this.drawEdgeMarkIcon(p, n, tangent, context, pixelRatio, edge);\n        }\n        break;\n      case 'Unspecified':\n      default:\n        if (restrict != 'mark') {\n          TripGraphLayer.drawEdgeMarkTriangle(p, n, tangent, context, pixelRatio);\n        }\n    }\n  }\n\n  static drawEdgeMarkTriangle(p: Point, n: Point, tangent: Point,\n                      context: CanvasRenderingContext2D, pixelRatio: number) {\n    const size = 10 * pixelRatio;\n    tangent.mul(size / tangent.norm());\n    p = Point.plus(p, Point.times(.5, tangent));\n    const base = Point.minus(p, tangent);\n\n    context.beginPath();\n    context.moveTo(base.x + (size / 2) * n.x, base.y + (size / 2) * n.y);\n    context.lineTo(p.x, p.y);\n    context.lineTo(base.x - (size / 2) * n.x, base.y - (size / 2) * n.y);\n    context.closePath();\n    context.fill();\n  }\n\n  drawEdgeMarkIcon(p: Point, n: Point, tangent: Point,\n                   context: CanvasRenderingContext2D, pixelRatio: number,\n                   edge: TripEdge) {\n    context.fillStyle = '#fff';\n    context.setLineDash([]);\n    context.lineWidth = 1 * pixelRatio;\n\n    const radius = 10 * pixelRatio;\n    const arrowLength = 6 * pixelRatio;\n\n    tangent = tangent.mul(1 / tangent.norm());\n    const head = Point.plus(p, Point.times((radius + arrowLength) / 2, tangent));\n    const center = Point.minus(p, Point.times((radius + arrowLength) / 2, tangent));\n    const circleBase = Point.plus(center, Point.times(radius, tangent));\n    const delta = (new Point(-tangent.y, tangent.x)).mul(4 * pixelRatio);\n    const circleStart = Point.plus(circleBase, delta);\n    const circleEnd = Point.minus(circleBase, delta);\n\n    const p1 = Point.minus(circleStart, center);\n    const angle1 = Math.atan2(p1.y, p1.x);\n    const p2 = Point.minus(circleEnd, center);\n    const angle2 = Math.atan2(p2.y, p2.x);\n\n    context.beginPath();\n    context.arc(center.x, center.y, radius, angle1, angle2);\n    context.lineTo(head.x, head.y);\n    context.closePath();\n    context.fill();\n    context.stroke();\n\n    context.fillStyle = '#000';\n    context.textAlign = 'center';\n    context.textBaseline=\"middle\"; \n    context.font = \"10px FontAwesome\";\n\n    const icons = {\n      'Bike': \"\\uf206\",\n      'Boat': \"\\uf21a\",\n      'Bus': \"\\uf207\",\n      'Car': \"\\uf1b9\",\n      'Helicopter': 'H',\n      'Plane': \"\\uf072\",\n      'Train': \"\\uf238\",\n      'Walk': \"\\uf183\"\n    }\n\n    const mean = this.edgeProperty(edge, 'travelMean');\n    context.fillText(icons[mean], center.x, center.y);\n  }\n\n  edgeProperty(edge: TripEdge, prop: string) {\n    return edge.properties[prop] || this.defaultEdgeProp[prop];\n  }\n\n  setEdgeStrokeStyle(context: CanvasRenderingContext2D, edge: TripEdge) {\n    let style = this.edgeProperty(edge, 'lineColor');\n    context.strokeStyle = style;\n    context.fillStyle = style;\n    context.lineWidth = this.renderer.pixelRatio * (\n        this.edgeProperty(edge, 'lineWidth'));\n    this.setDashStyle(context, this.edgeProperty(edge, 'dashed'));\n  };\n\n  nodeRadius(node: TripNode): number {\n    let r = this.defaultRadius;\n    if (node.properties && node.properties.radius) {\n      r = node.properties.radius;\n    }\n    return r * this.renderer.pixelRatio;\n  };\n\n  drawNodePoint(context: CanvasRenderingContext2D, pinchZoom: any, node: TripNode) {\n    if (node.properties && node.properties.point == false) {\n      return;\n    }\n    let pos = node.viewerPos;\n    this.drawPoint(context, pos, this.renderer.pixelRatio, node.properties || {});\n  }\n\n  drawNodeLabel(context: CanvasRenderingContext2D, pinchZoom: any, node: TripNode) {\n    if (node.label || node.labelIcon) {\n      let pos = pinchZoom.viewerPosFromWorldPos(\n        (node.properties && node.properties.labelCoord ?\n         node.properties.labelCoord : node.coord));\n      if (node.label) {\n        TripGraphLayer.drawText(context, node.label, pos,\n                 this.renderer.pixelRatio, node.properties || {},\n                 this.defaultTextProp);\n      }\n      if (node.labelIcon && node.labelIcon.url in this.icons) {\n        if (node.labelIcon.autorotate != undefined && node.properties.labelCoord) {\n          let coord = new Point(node.coord);\n          node.labelIcon.angle = node.labelIcon.autorotate + Math.atan2(\n              coord.y - node.properties.labelCoord.y,\n              coord.x - node.properties.labelCoord.x);\n        }\n        TripGraphLayer.drawIcon(context, this.icons[node.labelIcon.url], node.labelIcon,\n                 pos, this.renderer.pixelRatio);\n      }\n      if (node.properties && node.properties.frame && node.label) {\n        let size = TripGraphLayer.measureText(\n            context, node.label,\n            this.renderer.pixelRatio, node.properties || {},\n            this.defaultTextProp);\n        context.strokeStyle = node.properties.frame;\n        size.width += 3 * this.renderer.pixelRatio;\n        size.height += 3 * this.renderer.pixelRatio;\n        context.rect(pos.x - size.width / 2,\n                     pos.y - size.height / 2,\n                     size.width, size.height);\n        context.stroke();\n      }\n    }\n  }\n\n  setDashStyle(context: CanvasRenderingContext2D, dashed?: number[]) {\n    let scaled = [];\n    if (dashed) {\n      for (let entry of dashed) {\n        scaled.push(this.renderer.pixelRatio * entry);\n      }\n    }\n\n    context.setLineDash(scaled);\n  }\n\n  drawLeaderLine(context: CanvasRenderingContext2D, pinchZoom: any, node: TripNode) {\n    if (node.properties && node.properties.leaderLineAnchor) {\n      let pixelRatio = this.renderer.pixelRatio;\n      let p = pinchZoom.viewerPosFromWorldPos(node.properties.leaderLineAnchor);\n      context.lineWidth = (node.properties.leaderLineWidth || 1) * pixelRatio;\n      context.beginPath();\n\n      let pos = pinchZoom.viewerPosFromWorldPos(node.coord);\n      let radius = this.nodeRadius(node);\n      let closest = pinchZoom.viewerPosFromWorldPos(\n          BoundingBox.closestPoint(new Point(node.coord), node.properties.labelBbox));\n\n      const maxLength =\n        (node.properties\n         && node.properties.maxLeaderLineLength !== undefined\n         ? node.properties.maxLeaderLineLength * pixelRatio : 3 * radius); \n\n      if (Point.dist(closest, pos) > maxLength) {\n        if (node.properties.dashed) {\n          this.setDashStyle(context, node.properties.dashed);\n        }\n\n        context.moveTo(p.x, p.y);\n        context.lineTo(pos.x, pos.y);\n        context.strokeStyle = node.properties.leaderLineColor || '#000000';\n        context.stroke();\n        if (node.properties.dashed) {\n          context.setLineDash([]);\n        }\n      }\n    }\n  };\n\n  drawPoint(context: CanvasRenderingContext2D, p: IPoint,\n            pixelRatio: number, properties: TripNodeProperties) {\n      context.strokeStyle = \"rgba(0,0,0,1)\";\n      context.fillStyle = \"rgba(255,255,255,1)\";\n      context.lineWidth = 2 * pixelRatio;\n      context.beginPath();\n      const radius = (properties.radius || this.defaultRadius) * pixelRatio;\n      context.arc(p.x, p.y, radius, 0, 2 * Math.PI, false);\n      context.stroke();\n      context.fill();\n\n      let style = properties.markStyle;\n      if (!style && properties.firstVisited) {\n        style = 'first';\n      }\n      if (style === 'first') {\n        context.fillStyle = \"rgba(0, 0, 0, 1)\";\n        context.beginPath();\n        context.arc(p.x, p.y, radius * .6, 0, 2 * Math.PI, false);\n        context.fill();\n      }\n  };\n\n  static measureText(context: CanvasRenderingContext2D, text: string,\n                     pixelRatio: number, properties: TripNodeProperties,\n                     defaultTextProp: TripNodeProperties) {\n    let lines = text.split('\\n');\n    let size = TripGraphLayer.setTextStyle(\n        context, pixelRatio, properties, defaultTextProp);\n\n    let r = { width: 0, height: size * lines.length };\n\n    for (let i in lines) {\n      r.width = Math.max(r.width, context.measureText(lines[i]).width);\n    }\n\n    return r;\n  }\n\n  static setTextStyle(context: CanvasRenderingContext2D, pixelRatio: number,\n                     properties: TripNodeProperties,\n                     defaultTextProp: TripNodeProperties): number {\n    properties = properties || {};\n    let fontSize = properties.fontSize || defaultTextProp.fontSize;\n    fontSize *= pixelRatio;\n    context.font = fontSize + 'px ' + (properties.font || \"'PT Sans', sans-serif\");\n    context.strokeStyle = properties.stroke || defaultTextProp.stroke ;\n    context.lineWidth = (properties.haloWidth || 4) * pixelRatio;\n    context.fillStyle = properties.fill || defaultTextProp.fill;\n    return parseInt(''+ fontSize);\n  };\n\n  static drawText(context: CanvasRenderingContext2D, text: string,\n                  pos: IPoint, pixelRatio: number,\n                  properties: TripNodeProperties,\n                  defaultTextProp: TripNodeProperties) {\n    let offset = (properties.textOffset != undefined ? properties.textOffset: 20)\n      * pixelRatio;\n\n    let dx, dy;\n    let placement = ((properties.textPlacement || 'S') + '').toUpperCase();\n\n    // horizontal settings\n    switch (placement) {\n      default:\n      case 'C':\n      case 'N':\n      case 'S':\n        context.textAlign = 'center';\n        dx = 0;\n        break;\n\n      case 'E':\n      case 'NE':\n        context.textAlign = 'start';\n        dx = offset;\n        break;\n\n      case 'O':\n      case 'W':\n        context.textAlign = 'end';\n        dx = -offset;\n        break;\n    }\n\n    // vertical settings\n    switch (placement) {\n      case 'C':\n      case 'E':\n      case 'W':\n      case 'O':\n        context.textBaseline = 'middle';\n        dy = 0;\n        break;\n\n      case 'N':\n      case 'NE':\n        context.textBaseline = 'bottom';\n        dy = -offset;\n        break;\n\n      default:\n      case 'S':\n        context.textBaseline = 'top';\n        dy = offset;\n        break;\n    }\n    let x: number = pos.x + dx;\n    let y: number = pos.y + dy;\n\n    let h: number = TripGraphLayer.setTextStyle(\n        context, pixelRatio, properties, defaultTextProp);\n\n    let lines = text.split('\\n');\n\n    context.shadowBlur = 3 * pixelRatio;\n    context.shadowColor = '#ffffff';\n\n    context.lineWidth = 2 * pixelRatio;\n\n    let vshift: number = (lines.length - 1) / 2;\n    for (let i = 0 ; i < lines.length; ++i) {\n      let line_y: number = y + (i - vshift) * h;\n      context.strokeText(lines[i], x, line_y);\n      context.fillText(lines[i], x, line_y);\n    }\n\n    context.shadowColor = 'transparent';\n  }\n\n  static drawIcon(context:CanvasRenderingContext2D, iconData: any, icon: any,\n           pos: IPoint, pixelRatio:number) {\n    if (!iconData) {\n      return;\n    }\n    let width = (icon.width ? icon.width * pixelRatio: 16 * pixelRatio);\n    let height = (icon.height ? icon.height * pixelRatio: width);\n    let ratioX = 'ratioX' in icon ? icon.ratioX : .5;\n    let ratioY = 'ratioY' in icon ? icon.ratioY : .5;\n    let dx = width * ratioX;\n    let dy = height * ratioY;\n    if (icon.angle) {\n      context.save();\n      context.translate(pos.x, pos.y);\n      context.rotate(icon.angle);\n      context.drawImage(iconData, -dx, -dy, width, height);\n      context.restore();\n    } else {\n      context.drawImage(iconData, pos.x - dx, pos.y - dy, width, height);\n    }\n  }\n\n  getLabelIconSize(context: CanvasRenderingContext2D, node: TripNode): Size2D {\n    let pixelRatio = this.renderer.pixelRatio;\n    let labelIcon = node.labelIcon;\n\n    return {\n      width: (labelIcon.width || 16) * pixelRatio,\n      height: (labelIcon.height || labelIcon.width || 16) * pixelRatio,\n    };\n  };\n\n  // Modify TripGraph to place labels at appropriate places\n  placeLabels(context: CanvasRenderingContext2D) {\n    let pinchZoom = this.renderer.pinchZoom;\n    let pixelRatio = this.renderer.pixelRatio;\n    let labelArray = [];\n    let anchorArray = [];\n    for (let i in this.graph.nodes) {\n      let node = this.graph.nodes[i];\n      if (!node.label && !node.labelIcon) {\n        continue;\n      }\n      let pos = pinchZoom.viewerPosFromWorldPos(node.coord);\n      let radius = this.defaultRadius;\n      if (node.properties && node.properties.radius) {\n        radius = node.properties.radius;\n      }\n      anchorArray.push({\n        x: pos.x,\n        y: pos.y,\n        r: radius * pixelRatio\n      });\n      let margin = 2 * pixelRatio;\n\n      let size, name;\n      if (node.label) {\n        size = TripGraphLayer.measureText(context, node.label, pixelRatio,\n                                          node.properties, this.defaultTextProp);\n        name = node.label;\n      } else if (node.labelIcon) {\n        size = this.getLabelIconSize(context, node);\n        size.width *= 1.4;\n        size.height *= 1.4;\n        name = 'icon:' + node.labelIcon.url;\n      }\n      let initialPos = pos;\n      if (node.properties && node.properties.userPlacement) {\n        initialPos = pinchZoom.viewerPosFromWorldPos(\n            node.properties.userPlacement);\n      }\n\n      const newLabel = {\n        x: initialPos.x,\n        y: initialPos.y,\n        name: name,\n        width: size.width + 2 * margin,\n        height: size.height + 2 * margin,\n        node: node,\n        userPlacement: (node.properties && node.properties.userPlacement ?\n                        initialPos : undefined)\n      };\n\n      labelArray.push(newLabel);\n    }\n    let labeler = d3.labeler()\n      .label(labelArray)\n      .anchor(anchorArray)\n      .width(this.renderer.canvas.width)\n      .height(this.renderer.canvas.height);\n\n    let originalEnergy = labeler.alt_energy();\n    let me = this;\n    let bezierCurves = [];\n    let bezierBbox = [];\n    let bezierLUT = [];\n    for (let e in this.graph.edges) {\n      let curves = this.graph.bezier(this.graph.edges[e]);\n      for (let i in curves) {\n        let curve = curves[i];\n        bezierCurves.push(curve);\n        let bbox = curve.bbox();\n        bezierBbox.push({\n          min: pinchZoom.viewerPosFromWorldPos(bbox.x.min, bbox.y.min),\n          max: pinchZoom.viewerPosFromWorldPos(bbox.x.max, bbox.y.max)\n        });\n        let lut = curve.getLUT(30);\n        let transformedLut = [];\n        for (let i in lut) {\n          transformedLut.push(pinchZoom.viewerPosFromWorldPos(lut[i]));\n        }\n        bezierLUT.push(transformedLut);\n      }\n    }\n\n    labeler.alt_energy(function(index, lab, anc) {\n      let curveOverlaps = 0;\n\n      let box = labeler.boxOfLabel(index);\n      let labBbox = new BoundingBox();\n      labBbox.addPoint(new Point(box.left, box.top));\n      labBbox.addPoint(new Point(box.right, box.bottom));\n\n      for (let i in bezierCurves) {\n        if (!BoundingBox.overlaps(bezierBbox[i], labBbox)) {\n          continue;\n        }\n\n        let lut = bezierLUT[i];\n        for (let j in lut) {\n          if (labBbox.contains(lut[j])) {\n            curveOverlaps++;\n          }\n        }\n      }\n      let energy = curveOverlaps * 10 + originalEnergy(index);\n\n      const userPlacement = labelArray[index].userPlacement;\n      if (userPlacement) {\n        const userPrefEnergy = Point.dist(userPlacement, labelArray[index]);\n        energy += userPrefEnergy ;\n      }\n\n      return energy;\n    });\n\n    let finalEnergy = labeler.start(5000, 1);\n\n    for (let i in labelArray) {\n      let entry = labelArray[i];\n      if (!entry.node.properties) {\n        entry.node.properties = {};\n      }\n      let properties = entry.node.properties;\n      let halfSize = Point.times(1/2, new Point(entry.width, entry.height));\n      properties.labelCoord = pinchZoom.worldPosFromViewerPos(entry);\n      properties.labelBbox = {\n        min: pinchZoom.worldPosFromViewerPos(Point.minus(entry, halfSize)),\n        max: pinchZoom.worldPosFromViewerPos(Point.plus(entry, halfSize))\n      };\n\n      TripGraph.placeLeaderLine(entry.node);\n      properties.textPlacement = 'C';\n      properties.textOffset = 0;\n    }\n  }\n\n  static shallowCopy( original: any ): any {\n      // First create an empty object with\n      // same prototype of our original source\n      let clone = Object.create( Object.getPrototypeOf( original ) ) ;\n\n      let i , keys = Object.getOwnPropertyNames( original ) ;\n\n      for ( i = 0 ; i < keys.length ; i ++ )\n      {\n          // copy each property into the clone\n          Object.defineProperty( clone , keys[ i ] ,\n              Object.getOwnPropertyDescriptor( original , keys[ i ] )\n          ) ;\n      }\n\n      return clone ;\n  }\n\n  makeFusedGraph(graph: TripGraph): TripGraph {\n    graph = graph || this.graph;\n\n    let renameDict = {};\n    let fuseNodePair = function(a, b) {\n      let r = TripGraphLayer.shallowCopy(a);\n      r.name = a.name + ',' + b.name;\n      r.label = a.label + '\\n' + b.label;\n      renameDict[a.name] = renameDict[b.name] = r.name;\n      return r;\n    };\n\n    let lookup = function(name) {\n      let r = name;\n      while (r in renameDict) {\n        r = renameDict[r];\n      }\n      return r;\n    };\n\n    let pinchZoom = this.renderer.pinchZoom;\n    for (let i in graph.nodes) {\n      let node = graph.nodes[i];\n      node.viewerPos = pinchZoom.viewerPosFromWorldPos(node.coord);\n    }\n\n    let keptNodes = [];\n    for (let j in graph.nodes) {\n      let node = graph.nodes[j];\n\n      if (!node.label) {\n        continue;\n      }\n\n      let r = this.nodeRadius(node);\n      let keep = true;\n\n      for (let i in keptNodes) {\n        const n = keptNodes[i];\n\n        const dist = Point.dist(n.viewerPos, node.viewerPos);\n        if (dist < (this.nodeRadius(n) + r)) {\n          keptNodes[i] = fuseNodePair(n, node);\n          keep = false;\n          break;\n        }\n      }\n      if (keep) {\n        keptNodes.push(node);\n      }\n    }\n\n    for (let j in graph.nodes) {\n      const node = graph.nodes[j];\n\n      if (!node.label) {\n        keptNodes.push(node);\n      }\n    }\n\n\n    const result = new TripGraph(undefined, this.defaultEdgeProp);\n\n    for (let i in keptNodes) {\n      const n = keptNodes[i];\n      result.nodes[n.name] = n;\n    }\n\n    for (let i in graph.edges) {\n      const edge = graph.edges[i];\n\n      const na = lookup(edge.from);\n      const nb = lookup(edge.to);\n\n      if (na != nb) {\n        let newEdge = TripGraphLayer.shallowCopy(edge);\n        newEdge.from = na;\n        newEdge.to = nb;\n        newEdge.originalEdge = edge;\n        result.edges.push(newEdge);\n      }\n    }\n\n    return result;\n  };\n\n  forEachNode(cb: (node: TripNode) => void) {\n    for (let i in this.graph.nodes) {\n      cb(this.graph.nodes[i]);\n    }\n  }\n\n  loadIcons(cb: (err?: Error) => void) {\n    const me = this;\n    this.iconsToLoad = 1;\n    this.failedIcons = 0;\n    const iconLoaded = function() {\n      me.iconsToLoad--;\n      if (cb && me.iconsToLoad === 0) {\n        if (me.failedIcons > 0) {\n          cb(new Error(me.failedIcons + ' icons failed to load.'));\n        } else {\n          cb();\n        }\n      }\n    };\n\n    this.forEachNode(function(node) {\n      if (node.labelIcon) {\n        const url = node.labelIcon.url;\n        me.iconsToLoad++;\n        me.renderer.loadImage(node.labelIcon.url,\n          function(data) {\n            me.icons[url] = data;\n            iconLoaded();\n          },\n          function(err) {\n            console.log('Failed to load: ' + url);\n            me.failedIcons++;\n            iconLoaded();\n          }\n        );\n      }\n    });\n\n    iconLoaded();\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-graph-layer.ts","import { Point, IPoint } from './point';\nimport { TripNode } from './trip-node';\nimport { TripEdge, TripEdgeProperties } from './trip-edge';\n\nimport { BoundingBox } from './bounding-box';\n\ndeclare var d3: any;\ndeclare var Bezier: any;\n\nexport class TripGraph {\n  nodes: { [name: string]: TripNode };\n  edges: TripEdge[];\n  defaultEdgeProp: TripEdgeProperties;\n\n  static generateControlPoints(\n      p0: Point, p1: Point, p2: Point, p3: Point): Point[] {\n    const delta = Point.minus(p2, p1).mul(1 / 3);\n    const norm = new Point(-delta.y, delta.x);\n    return [\n      Point.plus(Point.plus(p1, delta), norm),\n      Point.plus(Point.minus(p2, delta), norm)\n    ];\n  };\n\n  static bezierFromPoints(points: IPoint[]): any {\n    const result = [];\n    for (let i = 0; i < 4; ++i) {\n      result.push(points[i].x);\n      result.push(points[i].y);\n    }\n    return new Bezier(result);\n  };\n\n  static bezierThroughPoints(points: IPoint[]) {\n    const result = [];\n    const t = .2;\n    for (let i = 1; i < points.length; ++i) {\n      const prev = (i === 1 ? points[i - 1] : points[i - 2]);\n      const a = points[i - 1];\n      const b = points[i];\n      const next = (i === (points.length - 1) ? points[i] : points[i + 1]);\n      result.push(TripGraph.bezierFromPoints([\n        a,\n        Point.plus(a, Point.times(t, Point.minus(b, prev))),\n        Point.plus(b, Point.times(t, Point.minus(a, next))),\n        b]));\n    }\n    return result;\n  };\n\n  static placeLeaderLine(node: TripNode) {\n    if (!node.properties) {\n      node.properties = {};\n    }\n    const placement = node.properties.leaderLine || 'bestAnchor';\n\n    const bbox = node.properties.labelBbox;\n    let anchor;\n    if (placement === 'center') {\n      const  width = bbox.max.x - bbox.min.x;\n      const  center = new Point((bbox.min.x + bbox.max.x) / 2,\n                                (bbox.min.y + bbox.max.y) / 2);\n      const  toCoord = Point.minus(node.coord, center);\n      toCoord.mul(.02);\n      anchor = Point.plus(center, toCoord);\n    } else if (placement === 'closestOnBbox') {\n      anchor = BoundingBox.closestPoint(node.coord, bbox);\n    } else {\n      anchor = d3.labeler.closestLineAnchorPoint(\n            node.coord,\n            {\n              left: bbox.min.x,\n              right: bbox.max.x,\n              top: bbox.min.y,\n              bottom: bbox.max.y,\n              cx: (bbox.min.x + bbox.max.x) / 2,\n              cy: (bbox.min.y + bbox.max.y) / 2\n            }\n        );\n    }\n\n    node.properties.leaderLineAnchor = anchor;\n  }\n  constructor(graph: any, defaultEdgeProp: TripEdgeProperties) {\n    const g = graph || {};\n    this.nodes = g.node || {};\n    this.edges = g.edges || [];\n    this.defaultEdgeProp = defaultEdgeProp;\n  }\n\n  createDefaultBezier() {\n    for (let i in this.edges) {\n      const e = this.edges[i];\n      const from = this.nodes[e.from];\n      const to = this.nodes[e.to];\n\n      e.controlPoints = TripGraph.generateControlPoints(undefined,\n                                                        from.coord, to.coord,\n                                                        undefined);\n    }\n  }\n\n  bezier(edge: TripEdge): any[] {\n    if (!edge.controlPoints || edge.properties.hidden) {\n      return [];\n    }\n\n    if (edge.properties.geom == 'straight'\n        || (!edge.properties.geom && this.defaultEdgeProp.geom == 'straight')) {\n      return TripGraph.bezierThroughPoints(\n          [ this.nodes[edge.from].coord, this.nodes[edge.to].coord ]);\n    }\n\n    if (edge.controlPoints.length === 2) {\n      const points = [\n        this.nodes[edge.from].coord,\n        edge.controlPoints[0],\n        edge.controlPoints[1],\n        this.nodes[edge.to].coord\n      ];\n      return [TripGraph.bezierFromPoints(points)];\n    } else if (edge.controlPoints.length === 5) {\n      const points1 = [\n        this.nodes[edge.from].coord,\n        edge.controlPoints[0],\n        edge.controlPoints[1],\n        edge.controlPoints[2],\n      ];\n      const points2 = [\n        edge.controlPoints[2],\n        edge.controlPoints[3],\n        edge.controlPoints[4],\n        this.nodes[edge.to].coord\n      ];\n      return [\n        TripGraph.bezierFromPoints(points1),\n        TripGraph.bezierFromPoints(points2)\n      ];\n    } else {\n      const allPoints = [this.nodes[edge.from].coord]\n        .concat(edge.controlPoints, [ this.nodes[edge.to].coord ]);\n      return TripGraph.bezierThroughPoints(allPoints);\n    }\n  }\n\n  bounds(): BoundingBox {\n    const r = new BoundingBox();\n    for (let i in this.nodes) {\n      r.addPoint(this.nodes[i].coord);\n    }\n    return r;\n  }\n\n  // Returns a rectangle containing all the nodes with the desired aspect ratio\n  // and margin factor.\n  //\n  // aspectRatio: width / height\n  frame(aspectRatio?: number, marginRatio?: Point | number): BoundingBox {\n    const bounds = this.bounds();\n    marginRatio = marginRatio || 1.1;\n\n    if (!bounds.max || !bounds.min) {\n      // no point. Let's use the full world.\n      bounds.min = new Point(0, 0);\n      bounds.max = new Point(1, 1);\n      marginRatio = 1;\n    } else if (bounds.min.x === bounds.max.x) {\n      // degenerate case, most likely becase was only 1 point. We need an area\n      // to define a frame.\n      const delta = new Point(1/32, 1/32);\n      bounds.addPoint(Point.plus(bounds.min, delta));\n      bounds.addPoint(Point.minus(bounds.min, delta));\n    }\n\n    aspectRatio = aspectRatio\n      || (bounds.max.x - bounds.min.x) / (bounds.max.y - bounds.min.y);\n\n    const margin = (typeof(marginRatio) === 'number' ?\n                  new Point(marginRatio, marginRatio) : marginRatio);\n\n    const initialSize = Point.minus(bounds.max, bounds.min);\n    initialSize.x *= margin.x;\n    initialSize.y *= margin.y;\n\n    const widthFromHeight = initialSize.y * aspectRatio;\n\n    let size;\n    if (initialSize.x > widthFromHeight) {\n      size = new Point(initialSize.x, initialSize.x / aspectRatio);\n    } else {\n      size = new Point(initialSize.y * aspectRatio, initialSize.y);\n    }\n\n    size.mul(.5);\n    const center = Point.times(0.5, Point.plus(bounds.max, bounds.min));\n    const result = new BoundingBox();\n    result.addPoint(Point.minus(center, size));\n    result.addPoint(Point.plus(center, size));\n    return result;\n  }\n\n  location(aspectRatio?: number, marginRatio?: Point | number) {\n    const frame = this.frame(aspectRatio, marginRatio);\n    const dx = frame.max.x - frame.min.x;\n    return {\n      x: (frame.max.x + frame.min.x) / 2,\n      y: (frame.max.y + frame.min.y) / 2,\n      scale: Math.max(1 / (1<<15), (frame.max.x - frame.min.x))\n    };\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-graph.ts","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".maptabset /deep/.panel-heading {\\n  padding: 10px 15px;\\n}\\n\\n.maptabset /deep/.panel {\\n  margin-bottom: 1px;\\n}\\n\\ntabset /deep/.nav-stacked {\\n  float: left;\\n}\\n\\ntabset /deep/.tab-content {\\n  float: left;\\n  width: 305px;\\n  margin-right: 6px;\\n}\\n\\n.inline {\\n  display: inline-block;\\n}\\n\\n.floatleft {\\n  float: left;\\n}\\n\\n.floatright {\\n  float: right;\\n}\\n\\n.nodeSelected {\\n  font-weight: bold;\\n}\\n\\n.nodeSkipped {\\n  color: gray;\\n}\\n\\n.small {\\n  width: 25px;\\n  height: 25px;\\n}\\n\\nbutton.delete {\\n  margin-top: 2px;\\n  margin-right: .8em;\\n  background-color: lightgray;\\n  color:red;\\n}\\n\\ndiv.maptabset {\\n  float: left;\\n}\\n\\ntab > button {\\n  width: 100%;\\n}\\n\\n/deep/.square {\\n  width: 10px;\\n  height: 10px;\\n  display: inline-block;\\n  margin: 3px;\\n}\\n\\n.hidden {\\n  display: none;\\n}\\n\\n.global-buttons {\\n  margin-bottom: 20px;\\n}\\n\\n.maptabset /deep/.nav-pills {\\n  margin-right: 6px;\\n}\\n\\n.maptabset /deep/.nav-item {\\n  border-right: 1px solid #ddd;\\n  margin: 0;\\n}\\n\\n.maptabset /deep/.nav-item.active {\\n  border-top: 1px #ddd solid;\\n  border-bottom: 1px #ddd solid;\\n  border-left: 1px #ddd solid;\\n  border-right: 0;\\n}\\n\\n.maptabset /deep/.nav-item.active /deep/a {\\n  color: #428bca;\\n  background-color: white;\\n}\\n\\n.maptabset /deep/.tab-content /deep/button {\\n  width: 100%;\\n}\\n\\n.spin-loader {\\n  position: absolute;\\n  bottom: -20px;\\n  left: 0px;\\n  right: 0px;\\n  top: -20px;\\n  z-index: 10000;\\n  background: url(/ng-map/assets/loader.gif) center center no-repeat;\\n  background-size: 80px 80px;\\n  background-color: rgba(0, 0, 0, 0.6);\\n  display: block;\\n}\\n\\n.map-colors {\\n  position: relative;\\n  padding: 5px 0px;\\n}\\n\\n.map-colors span {\\n  position: absolute;\\n  left:40px;\\n  top:11px;\\n}\\n\\n.map-btn {\\n  margin-top: 10px;\\n}\\n.in-margin-top {\\n  margin-top: auto;\\n  margin-bottom: auto;\\n}\\n.fa-right-margin {margin-right: 7px;}\\n\\n.form-control-input {\\n  display: inline-block;\\n  margin-right: 10px;\\n  height: 34px;\\n  padding: 6px 12px;\\n  font-size: 12px;\\n  line-height: 1.42857143;\\n  color: #555555;\\n  background-color: #fff;\\n  background-image: none;\\n  border: 1px solid #ccc;\\n  border-radius: 4px;\\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\\n  transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\\n}\\n\\n.italic {\\n  font-style: italic;\\n  padding-left: 12px;\\n  font-size: 12px;\\n}\\n\\n.btn-group {width: 100%;}\\n\\n.form-control {margin-top: 5px;}\\n\\naccordion-group p {\\n  margin: 0;\\n}\\naccordion-group p .fa {\\n  margin-right: 10px;\\n  color:#428bca;\\n}\\n\\n#accordion-menu p {\\n  color: #333;\\n  background-color: #f5f5f5;\\n  cursor: pointer;\\n  padding: 10px 20px;\\n  margin: 0;\\n  border-top-left-radius: 4px;\\n  border-top-right-radius: 4px;\\n  border: 1px solid #ddd;\\n  box-shadow: 0 1px 1px rgba(0,0,0,.05);\\n}\\n\\n#accordion-menu .content {\\n  border:1px solid #ddd;\\n  padding:20px 15px 10px;\\n  color: #333;\\n  background-color: white;\\n  border-color: #ddd;\\n  display: none;\\n  margin: 0;\\n}\\n\\n#accordion-menu ul li {\\n  list-style-type:none;\\n}\\n\\n#accordion-menu .collapsable-menu {display:none;}\\n#accordion-menu .uncollapsable-menu {display:block;}\\n\\n#long-accord {\\n  max-height: 600px;\\n  overflow-y: auto;\\n  padding-right: 5px;\\n}\\n#long-accord::-webkit-scrollbar {\\n  background-color: #eee;\\n  width: 6px;\\n}\\n#long-accord::-webkit-scrollbar-thumb {\\n  background-color: #999;\\n  border-radius: 6px;\\n}\\n\\n.thinbutton {\\n  padding-left: 10px;\\n  padding-right: 10px;\\n}\\n\\n#scaleSlider {\\n  padding: 15px;\\n}\\n\\n.hflex-container {\\n  display: -ms-flexbox;\\n  display: -webkit-box;\\n  display: flex;\\n  -ms-flex-direction: row;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n          flex-direction: row;\\n  -ms-flex-wrap: nowrap;\\n  flex-wrap: nowrap;\\n  -ms-flex-pack: start;\\n  -webkit-box-pack: start;\\n          justify-content: flex-start;\\n  -ms-flex-line-pack: stretch;\\n  align-content: stretch;\\n  -ms-flex-align: start;\\n  -webkit-box-align: start;\\n          align-items: flex-start;\\n}\\n\\n.flex-item-wide,\\n.flex-item-narrow {\\n  -ms-flex-order: 0;\\n  -webkit-box-ordinal-group: 1;\\n          order: 0;\\n  -webkit-align-self: auto;\\n  -ms-flex-item-align: auto;\\n  -ms-grid-row-align: auto;\\n      align-self: auto;\\n}\\n\\n.flex-item-narrow {\\n  -ms-flex: 0 1 auto;\\n  -webkit-box-flex: 0;\\n          flex: 0 1 auto;\\n}\\n\\n.flex-item-wide {\\n  -ms-flex: 1 1 auto;\\n  -webkit-box-flex: 1;\\n          flex: 1 1 auto;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-map.component.css\n// module id = ../../../../../frontend/map_editor/src/app/trip-map/trip-map.component.css\n// module chunks = main","module.exports = \"<link href=\\\"https://fonts.googleapis.com/css?family=PT+Sans\\\" rel=\\\"stylesheet\\\">\\n\\n<div *ngIf=\\\"_errorMessage\\\" class=\\\"alert fade in alert-danger\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" (click)=\\\"_errorMessage = null\\\"></button>\\n  {{_errorMessage}}\\n</div>\\n<div *ngIf=\\\"_infoMessage\\\" class=\\\"alert fade in alert-success\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" (click)=\\\"_infoMessage = null\\\"></button>\\n  {{_infoMessage}}\\n</div>\\n\\n<p *ngIf=\\\"!_loadingMap && _numLocations ==0\\\">Please add at least one location in a day or event settings</p>\\n<p *ngIf=\\\"_loadingMap\\\">Loading...</p>\\n\\n<div *ngIf=\\\"_numLocations > 0 && !_visitedPlaceList.length\\\">\\n  <p>No map created yet.</p>\\n  <button (click)=\\\"fetchLocationsAndGenerateMap()\\\" class=\\\"btn btn-primary\\\">Create map</button>\\n</div>\\n<div [class.hidden]=\\\"!_visitedPlaceList.length\\\">\\n<div class=\\\"maptabset\\\">\\n<tabset [vertical]=\\\"true\\\" type=\\\"pills\\\">\\n  <tab (select)=\\\"lockMap(false)\\\">\\n    <ng-template tabHeading>\\n      <i class=\\\"fa fa-file\\\"></i>\\n    </ng-template>\\n    <div class=\\\"panel panel-default\\\">\\n      <div class=\\\"panel-body\\\">\\n\\n        <div  class=\\\"panel panel-default\\\">\\n          <div class=\\\"panel-body\\\">\\n            <div>\\n            <label>Format/orientation</label>\\n            </div>\\n            <select class=\\\"form-control\\\" [ngModel]=\\\"_pageSizeName\\\" (change)=\\\"uiSetPageSize($event.target.value)\\\">\\n               <option *ngFor=\\\"let x of _pageSizes\\\"\\n                       class=\\\"form-control\\\"\\n                       required\\n                       [value]=\\\"x.key()\\\"\\n                       >{{x.name}}</option>\\n            </select>\\n          </div>\\n\\n          <div class=\\\"panel-body\\\">\\n            <div>\\n            <label>Zoom / center</label>\\n            </div>\\n\\n            <label class=\\\"btn btn-default map-btn\\\"\\n                  (click)=\\\"uiSetFrame()\\\">Auto scroll/zoom</label>\\n\\n            <div>\\n            <input id=\\\"scaleSlider\\\" [ngModel]=\\\"scale()\\\"\\n              (change)=\\\"setScale($event.target.value)\\\"\\n              (input)=\\\"setScale($event.target.value)\\\"\\n              type=\\\"range\\\" min=\\\"0\\\" max=\\\"8\\\" step=\\\"0.000001\\\" />\\n            </div>\\n            <div>\\n              <input type=\\\"checkbox\\\" [checked]=\\\"_autoLockMap\\\"\\n                (change)=\\\"_autoLockMap = !_autoLockMap\\\" />\\n              <span>Auto lock map</span>\\n            </div>\\n          </div>\\n        </div>\\n      <accordion [closeOthers]=\\\"true\\\">\\n        <accordion-group>\\n          <p accordion-heading><i class=\\\"fa fa-map-o\\\" aria-hidden=\\\"true\\\"></i>Map colors</p>\\n          <div>\\n            <div class=\\\"map-colors\\\">\\n              <input [colorPicker]=\\\"_seqTrip.landColor()\\\"\\n                     (colorPickerChange)=\\\"setLandColor($event)\\\"\\n                     [style.background]=\\\"_seqTrip.landColor()\\\"\\n                     class=\\\"small form-control\\\"\\n                     />\\n              <span>Land color</span>\\n            </div>\\n            <div class=\\\"map-colors\\\">\\n              <input [colorPicker]=\\\"_seqTrip.seaColor()\\\"\\n                     (colorPickerChange)=\\\"setSeaColor($event)\\\"\\n                     [style.background]=\\\"_seqTrip.seaColor()\\\"\\n                     class=\\\"small form-control\\\"\\n                     />\\n              <span>Sea color</span>\\n            </div>\\n            <div class=\\\"map-colors\\\">\\n              <input [colorPicker]=\\\"_seqTrip.borderColor()\\\"\\n                     (colorPickerChange)=\\\"setBorderColor($event)\\\"\\n                     [style.background]=\\\"_seqTrip.borderColor()\\\"\\n                     class=\\\"small form-control\\\"\\n                     />\\n              <span>Border color</span>\\n            </div>\\n            <div class=\\\"map-colors\\\">\\n              <input type=\\\"checkbox\\\" [checked]=\\\"_seqTrip.showRivers()\\\"\\n              (change)=\\\"toggleShowRiver()\\\"/>\\n              <span>Show rivers</span>\\n            </div>\\n          </div>\\n        </accordion-group>\\n\\n        <accordion-group>\\n          <p accordion-heading>\\n            <i class=\\\"fa fa-font\\\" aria-hidden=\\\"true\\\"></i>Default text properties\\n          </p>\\n          <div>\\n            <text-prop [(properties)]=\\\"_seqTrip._tripData.defaultTextProp\\\"\\n                       (onChange)=\\\"nodePropertiesChanged()\\\"\\n                       [noReset]=\\\"true\\\"></text-prop>\\n\\n          </div>\\n        </accordion-group>\\n\\n        <accordion-group>\\n          <p accordion-heading>\\n            <i class=\\\"fa fa-arrows-h\\\" aria-hidden=\\\"true\\\"></i>Default line properties\\n          </p>\\n          <div>\\n            <edge-prop [(properties)]=\\\"_seqTrip._tripData.defaultEdgeProp\\\"\\n                       (onChange)=\\\"edgePropertiesChanged()\\\"\\n                       [noReset]=\\\"true\\\"></edge-prop>\\n\\n          </div>\\n        </accordion-group>\\n      </accordion>\\n\\n      </div>\\n    </div>\\n  </tab>\\n\\n\\n\\n  <tab (select)=\\\"lockMap(true)\\\">\\n    <ng-template tabHeading>\\n      <i class=\\\"glyphicon glyphicon-map-marker\\\"></i>\\n    </ng-template>\\n    <accordion id=\\\"long-accord\\\">\\n      <ng-container *ngFor=\\\"let intr of _interleaved\\\">\\n      <accordion-group *ngIf=\\\"intr.node\\\"\\n               [class.nodeSkipped]=\\\"intr.node && isSkipped(intr.node)\\\"\\n               #group\\n               >\\n        <div accordion-heading class=\\\"hflex-container\\\">\\n          <i class=\\\"fa fa-right-margin flex-item-narrow in-margin-top\\\"\\n          style=\\\"font-size: 14pt\\\"\\n             [ngClass]=\\\"{'fa-caret-down': group?.isOpen, 'fa-caret-right': !group?.isOpen}\\\"></i>\\n          <input [ngModel]=\\\"intr.node.label\\\"\\n                 [disabled]=\\\"isSkipped(intr.node)\\\"\\n                 (click)=\\\"$event.stopPropagation();\\\"\\n                 (change)=\\\"setNodeLabel(intr.node, $event.target.value)\\\"\\n                 class=\\\"form-control-input flex-item-wide\\\"/>\\n\\n          <input type=\\\"checkbox\\\"\\n                 class=\\\"flex-item-narrow in-margin-top\\\"\\n           [ngModel]=\\\"!isSkipped(intr.node)\\\"\\n            (click)=\\\"toggleSkipNode(intr.node); $event.stopPropagation();\\\">\\n\\n        </div>\\n        <div *ngIf=\\\"!isSkipped(intr.node)\\\" class=\\\"btn-group\\\">\\n          <div>\\n            <text-prop [(properties)]=\\\"intr.node.properties\\\"\\n                       [defaults]=\\\"_seqTrip._tripData.defaultTextProp\\\"\\n                       (onChange)=\\\"nodePropertiesChanged()\\\"></text-prop>\\n          </div>\\n          <span>\\n          <label class=\\\"btn btn-default map-btn\\\" [ngModel]=\\\"intr.node.properties.landing\\\"\\n                 (click)=\\\"toggleProperty(intr.node, 'landing')\\\"\\n                 btnCheckbox><img src=\\\"/ng-map/assets/landing.svg\\\" alt=\\\"Landing\\\" width=\\\"16px\\\" height=\\\"16px\\\" /></label>\\n\\n           <label class=\\\"btn btn-default map-btn\\\" [ngModel]=\\\"intr.node.properties.takeoff\\\"\\n                 (click)=\\\"toggleProperty(intr.node, 'takeoff')\\\"\\n                 btnCheckbox><img src=\\\"/ng-map/assets/takeoff.svg\\\" alt=\\\"Take-off\\\" width=\\\"16px\\\" height=\\\"16px\\\" /></label>\\n          </span>\\n\\n          <span>\\n          <label class=\\\"btn btn-default map-btn\\\" [ngModel]=\\\"intr.node.properties.markStyle === 'first'\\\"\\n                 (click)=\\\"setProperty(intr.node, 'markStyle', (intr.node.properties.markStyle === 'first' ? 'normal' : 'first'))\\\"\\n                 btnCheckbox><i class=\\\"fa fa-circle\\\" aria-hidden=\\\"true\\\"></i></label>\\n          </span>\\n        </div>\\n      </accordion-group>\\n      <accordion-group *ngIf=\\\"intr.edge\\\"\\n               [class.nodeSkipped]=\\\"intr.edge.properties.hidden\\\"\\n               #group2\\n               >\\n        <div accordion-heading>\\n          <i class=\\\"fa\\\"\\n          style=\\\"font-size: 14pt\\\"\\n             [ngClass]=\\\"{'fa-caret-down': group2?.isOpen, 'fa-caret-right': !group2?.isOpen}\\\"></i>\\n          <span class=\\\"italic\\\">{{ origin(intr.edge).label }} - {{ destination(intr.edge).label }}</span>\\n          <input type=\\\"checkbox\\\"\\n           class=\\\"pull-right\\\"\\n           [ngModel]=\\\"!intr.edge.properties.hidden\\\"\\n            (click)=\\\"toggleHideEdge(intr.edge); $event.stopPropagation();\\\">\\n        </div>\\n        <edge-prop [(properties)]=\\\"intr.edge.properties\\\"\\n                   [defaults]=\\\"_seqTrip._tripData.defaultEdgeProp\\\"\\n                   (onChange)=\\\"edgePropertiesChanged(intr.edge)\\\"></edge-prop>\\n      </accordion-group>\\n      </ng-container>  <!-- ngFor on interleaved places and edges -->\\n    </accordion>\\n  </tab>\\n\\n  <tab (select)=\\\"lockMap(true)\\\">\\n    <ng-template tabHeading>\\n      <span class=\\\"glyphicon glyphicon-globe\\\" aria-hidden=\\\"true\\\"></span>\\n    </ng-template>\\n    <div class=\\\"panel panel-default\\\">\\n      <div class=\\\"panel-body\\\">\\n        <label>Country colors</label>\\n        <p >Click on a country to select its color</p>\\n        <div *ngFor=\\\"let country of tunedCountries()\\\"\\n             (click)=selectCountry(country)\\n             class=\\\"panel-body\\\">\\n           <input [colorPicker]=\\\"countryColor(country)\\\"\\n                  (colorPickerChange)=\\\"setCountryColor(country, '' + $event)\\\"\\n                  [cpToggle]=\\\"country === _selectedCountry\\\"\\n                  [style.background]=\\\"countryColor(country)\\\"\\n                  class=\\\"small\\\"\\n                  />\\n           <span>{{country}}</span>\\n           <i (click)=\\\"setCountryColor(country, 'default')\\\"\\n              class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i>\\n         </div>\\n      </div>\\n    </div>\\n  </tab>\\n\\n</tabset>\\n</div>\\n\\n<div class=\\\"floatleft\\\" [style.width.px]=\\\"_canvasWidth\\\">\\n  <canvas\\n    #mapCanvas\\n    [style.width.px]=\\\"_canvasWidth\\\"\\n    [style.height.px]=\\\"_canvasHeight\\\"\\n    [attr.width] = '_canvasWidth * pixelRatio()'\\n    [attr.height] = '_canvasHeight * pixelRatio()'></canvas>\\n</div>\\n\\n  <span class=\\\"floatright btn-group\\\" style=\\\"width:auto;\\\" dropdown>\\n    <button dropdownToggle type=\\\"button\\\" class=\\\"btn btn-default dropdown-toggle thinbutton\\\">\\n      <i class=\\\"fa fa-cogs\\\" aria-hidden=\\\"true\\\"></i><br/><span class=\\\"caret\\\"></span>\\n    </button>\\n    <ul *dropdownMenu class=\\\"dropdown-menu dropdown-menu-right\\\" role=\\\"menu\\\">\\n      <li role=\\\"menuitem\\\"><a class=\\\"dropdown-item\\\" href=\\\"#\\\" (click)=\\\"autoPlaceLabels()\\\">Auto place labels</a></li>\\n      <li role=\\\"menuitem\\\"><a class=\\\"dropdown-item\\\" href=\\\"#\\\" (click)=\\\"resetCurves()\\\">Reset curves</a></li>\\n      <li class=\\\"divider dropdown-divider\\\"></li>\\n      <li role=\\\"menuitem\\\"><a class=\\\"dropdown-item\\\" href=\\\"#\\\" (click)=\\\"download('pdf')\\\">Export PDF</a></li>\\n      <li role=\\\"menuitem\\\"><a class=\\\"dropdown-item\\\" href=\\\"#\\\" (click)=\\\"download('svg')\\\">Export SVG</a></li>\\n    </ul>\\n  </span>\\n\\n\\n</div>\\n\\n<div *ngIf=\\\"_showSpinner\\\" class=\\\"spin-loader\\\"></div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-map.component.html\n// module id = ../../../../../frontend/map_editor/src/app/trip-map/trip-map.component.html\n// module chunks = main","import { Component, OnInit, ViewChild, ElementRef, HostListener } from '@angular/core';\nimport { Http, Headers, RequestOptions} from '@angular/http';\n\nimport { TripGraph } from './trip-graph';\nimport { TripGraphEditor } from './trip-graph-editor';\nimport { TripGraphLayer } from './trip-graph-layer';\nimport { ITripNode, TripNode, TripNodeProperties } from './trip-node';\nimport { TripEdge } from './trip-edge';\nimport { IPoint, Point } from './point';\nimport { SeqTrip } from './seq-trip';\nimport { T, Location, CanvasTilesRenderer, CanvasTilesRendererParams, PinchZoom } from './tiles';\nimport {forEach} from \"@angular/router/src/utils/collection\";\n\ndeclare var Utils: any;\n\ndeclare var thisTripApi: {\n  mapUrl: string;\n  locationsUrl: string;\n  tripLanguage: string;\n};\n\ndeclare var $: any;\n\ndeclare interface CountryStyle {\n  lineWidth?: number;\n  color?: string;\n}\n\ndeclare interface WorldBackgroundLayerParams {\n  renderer: CanvasTilesRenderer;\n  onCountryClic: (country: {id: string}) => void;\n  onSeaClic: () => void;\n  landColor: string;\n  seaColor: string;\n  borderColor: string;\n  showRivers: boolean;\n  countryStyle: { [id: string]: CountryStyle; };\n}\ndeclare class WorldBackgroundLayer {\n  params: WorldBackgroundLayerParams;\n  constructor (parameters: WorldBackgroundLayerParams);\n};\n\nclass PageSize {\n\n  constructor(\n    public name: string,\n    public width_mm: number,\n    public height_mm: number) { }\n\n  static mmToPoint = 2.83465;\n\n  static fromPt(name: string, w_pt: number, h_pt: number) : PageSize {\n    return new PageSize(name, w_pt / PageSize.mmToPoint,\n                        h_pt / PageSize.mmToPoint);\n  }\n\n  widthPt() { return Math.round(this.width_mm * PageSize.mmToPoint); }\n  heightPt() { return Math.round(this.height_mm * PageSize.mmToPoint); }\n  key(): string { return Math.round(this.width_mm) + 'x' + Math.round(this.height_mm); }\n};\n\ninterface DBLocation {\n  id: number,\n  label: string,\n  latitude: number,\n  longitude: number\n};\n\ninterface EdgeOrNode {\n  edge?: TripEdge;\n  node?: TripNode;\n};\n\nconst enum ModificationEvent {\n  Location = 1,\n  Node,\n  NodeStyle,\n  Edge,\n  PageSize,\n  MapColor,\n  Frame,\n  LabelMoved,\n  CurveMoved,\n  Label,\n  LabelProperties,\n  EdgeProperties\n}\n\ninterface Selection {\n  _selectedNode: TripNode;\n  _selectedCountry: string;\n  _selectedEdge: TripEdge;\n}\n\ninterface TripLocationEntry {\n  id: number;\n  geoname_id: number;\n  label: string;\n  latitude: number;\n  longitude: number;\n  translations?: { [id: string]: string };\n}\n\n@Component({\n  selector: 'trip-map',\n  templateUrl: 'trip-map.component.html',\n  styleUrls: ['./trip-map.component.css'],\n})\nexport class TripMapComponent implements OnInit {\n\n  public _canvasWidth: number;\n  public _canvasHeight: number;\n  private _renderer: CanvasTilesRenderer;\n  private _worldLayer: WorldBackgroundLayer;\n  private _tripLayer: TripGraphLayer;\n  private _editor: TripGraphEditor;\n\n  private _graph: TripGraph;\n  private _selectedNode: TripNode;\n  private _selectedCountry: string;\n  private _selectedEdge: TripEdge;\n\n  private _autoRefresh: number;\n  private _saveTimeout?: any;\n\n  public _visitedPlaceList: TripNode[];\n  public _stages: TripEdge[];\n  public _interleaved: EdgeOrNode[];\n  public _seqTrip: SeqTrip;\n  public _infoMessage?: string;\n  public _errorMessage?: string;\n  public _numLocations: number;\n  public _autoLockMap: boolean;\n\n  // TODO: configure this from environment (prod, staging or dev).\n  public cssserviceUrl = 'https://destinationbook-cssservice.herokuapp.com/';\n    // 'http://cssservice-staging.herokuapp.com/';\n    // 'http://localhost:5000/';\n\n  // true when the map is loading.\n  _loadingMap: boolean;\n  _pageSizes : PageSize[];\n  _pageSizeName : string;\n  _pageSizeMap: { [key: string] : PageSize };\n  _showSpinner: boolean;\n  _saved: boolean;\n  _scaleChangeTimeout: number;\n\n  @ViewChild('mapCanvas') canvas: ElementRef;\n\n  constructor(public http: Http) {\n    this._canvasWidth = 512;\n    this._canvasHeight = 512;\n    this._selectedCountry = '';\n    this._loadingMap = false;\n    this._autoLockMap = true;\n\n    const pageWidth = 128;\n    const pageHeight = 190;\n    this._pageSizes = [\n      new PageSize(\"Full page\", pageWidth, pageHeight),\n      new PageSize(\"Full page rotated\", pageHeight, pageWidth),\n      new PageSize(\"Square\", pageWidth, pageWidth),\n      new PageSize(\"Landscape\", pageWidth, pageHeight / 2)\n    ];\n    this._pageSizeMap = {};\n    for (let s of this._pageSizes) {\n      this._pageSizeMap[s.key()] = s;\n    }\n    this._numLocations = 0;\n    this._showSpinner = false;\n\n    this._seqTrip = new SeqTrip();\n    this._graph = new TripGraph(undefined, this._seqTrip.defaultEdgeProp());\n\n    if (this._tripLayer) {\n      this._tripLayer.defaultTextProp = this._seqTrip.defaultTextProp();\n      this._tripLayer.defaultEdgeProp = this._seqTrip.defaultEdgeProp();\n    }\n    this._visitedPlaceList = this._seqTrip.places();\n    this._stages = this._seqTrip.stages();\n    this._interleaved = this.interleavedPlacesAndEvents();\n\n    this.setPageSize(this._pageSizes[0].key());\n  }\n\n  fetchRawLocations() : Promise<TripLocationEntry[]> {\n    this._numLocations = 0;\n\n    return new Promise((resolve, reject) => {\n    $.getJSON(\n        thisTripApi.locationsUrl,\n        (data: any) => {\n          // Fake data for dev\n          /*\n          data = [\n  { id: 6, label: 'Aldabra Islands',  latitude:-9.425439, longitude: 46.365051 },\n  { id: 7, label: 'Diego Suarez',  latitude:-12.323135,  longitude:49.294283 },\n  { id: 8, label: 'Nosy Hara',  latitude:-12.238214, longitude: 49.013553 },\n  { id: 9, label: 'Nosy Tanikely',  latitude:-13.482788, longitude: 48.237487 },\n  //{ id: 10, label: 'Mahajanga',  latitude:-15.692149, longitude: 46.333686 },\n  { id: 11, label: 'Mozambique Islands',  latitude:-15.038150, longitude: 40.731701 },\n  { id: 12, label: 'Quirimbas Archipelago',  latitude:-12.146667, longitude: 40.5725 },\n  { id: 13, label: 'Kilwa Kisiwani',  latitude:-8.965874, longitude: 39.497082 },\n  { id: 14, label: 'Zanzibar',  latitude:-6.165917, longitude: 39.202641 },\n  { id: 15, label: 'Dar Es Salaam',  latitude:-6.792354, longitude: 39.208328 }];\n  */\n          if (Array.isArray(data)) {\n            this._numLocations = data.length;\n            resolve(data as TripLocationEntry[]);\n          } else {\n            reject('bad map data');\n          }\n        },\n        (err: any) => { reject(err); });\n    });\n  }\n\n  translateLocations(locationData : TripLocationEntry[]) : Promise<TripLocationEntry[]> {\n    return new Promise((resolve, reject) => {\n        for (let i in locationData) {\n          if (locationData[i].translations && locationData[i].translations[thisTripApi.tripLanguage] != '') {\n            locationData[i].label = locationData[i].translations[thisTripApi.tripLanguage];\n          }\n          else if (locationData[i].translations) {\n            locationData[i].label = locationData[i].translations['en'];\n          }\n        }\n        const missing_translations =\n        locationData\n        .filter((loc : TripLocationEntry) => !loc.translations)\n        .map((a : TripLocationEntry) => a.geoname_id);\n        if (missing_translations.length == 0) {\n        resolve(locationData);\n        return;\n      }\n      $.getJSON(this.cssserviceUrl + 'location?q=' + missing_translations.join(',')\n                  + '&l=' + thisTripApi.tripLanguage,\n                (data: any[]) => {\n         if (!data || !Array.isArray(data)) {\n           resolve(locationData);\n           return;\n         }\n         const dict = { };\n         for (let i in locationData) {\n           dict[locationData[i].geoname_id] = locationData[i];\n         }\n\n         for (let d of data) {\n           if (d.id in dict && d.name) {\n             dict[d.id].label = d.name;\n           }\n         }\n         return resolve(locationData);\n       },\n       (err: any) => { reject(err); });\n    });\n  }\n\n  fetchLocations() : Promise<TripLocationEntry[]> {\n    return this.fetchRawLocations().then((data) => this.translateLocations(data));\n  }\n\n  generateFromLocations(locations: DBLocation[]) {\n    this._seqTrip.reset();\n    this.updateWithLocations(locations, true /* reset location */);\n    if (this._tripLayer) {\n      this._tripLayer.defaultTextProp = this._seqTrip.defaultTextProp();\n      this._tripLayer.defaultEdgeProp = this._seqTrip.defaultEdgeProp();\n    }\n    this.saveMap();\n  }\n\n  updateWithLocations(locations: DBLocation[], resetLocation?: boolean) {\n    const latLonToCoord = (lat: number, lon: number) => {\n      const p = Utils.latLonToWorld([lon, lat]);\n      return new Point(p);\n    };\n    const existingPlaces : { [key: number]: TripNode } = { };\n    for (let p of this._seqTrip.places()) {\n      if ('dbid' in p) {\n        existingPlaces[p.dbid] = p;\n      }\n    }\n\n    const places: TripNode[] = [];\n    let numNewPlaces = 0;\n    for (let l of locations) {\n      const coord = latLonToCoord(l.latitude, l.longitude);\n      const id = '' + l.id;\n      if (id in existingPlaces) {\n        const updatedPlace = existingPlaces[id];\n        updatedPlace.coord = coord;\n        places.push(updatedPlace);\n      } else {\n        places.push(TripNode.parse({\n          dbid: id,\n          name: id,\n          label: l.label,\n          coord: coord\n        }));\n        ++numNewPlaces;\n      }\n    }\n\n    this._seqTrip.setPlaces(places);\n\n    if (resetLocation) {\n      this._seqTrip.setLocation(this._seqTrip.makeGraph().location(\n              this._seqTrip.width_mm() / this._seqTrip.height_mm(), 1.2));\n    }\n\n    this._visitedPlaceList = this._seqTrip.places();\n    this._stages = this._seqTrip.stages();\n    this._interleaved = this.interleavedPlacesAndEvents();\n    this.pushSeqTripToCanvas(resetLocation);\n    if (numNewPlaces > 0) {\n      this.placeLabels();\n    }\n  }\n\n  destination(edge: TripEdge): TripNode {\n    return this._tripLayer.graph.nodes[edge.to]\n      || this._seqTrip.placeByName(edge.to);\n  }\n  origin(edge: TripEdge): TripNode {\n    return this._tripLayer.graph.nodes[edge.from]\n      || this._seqTrip.placeByName(edge.from);\n  }\n\n  ngOnInit() {\n    this.loadMap();\n  }\n\n  pixelRatio() : number {\n    if (this._renderer && this._renderer.pixelRatio) {\n      return this._renderer.pixelRatio;\n    }\n    return 1;\n  }\n\n  pushSeqTripToCanvas(fullReset?: boolean) {\n    this.prepareCanvas();\n    for (let p of ['seaColor', 'borderColor', 'landColor', 'showRivers']) {\n      this._worldLayer.params[p] = this._seqTrip[p]();\n    }\n    this._tripLayer.defaultRadius = this._seqTrip.defaultRadius();\n    this._tripLayer.defaultTextProp = this._seqTrip.defaultTextProp();\n    this._tripLayer.defaultEdgeProp = this._seqTrip.defaultEdgeProp();\n    this._worldLayer.params.countryStyle = this._seqTrip.world();\n\n    const pageSize = new PageSize(this._seqTrip.pageSizeName(),\n                                  this._seqTrip.width_mm(),\n                                  this._seqTrip.height_mm());\n    if (!this._pageSizeMap[pageSize.key()]) {\n      this._pageSizeMap[pageSize.key()] = pageSize;\n      this._pageSizes.push(pageSize);\n    }\n\n    this.setPageSize(pageSize.key(), false);\n\n    this._renderer.setLocation(this._seqTrip.location());\n    this.clearSelection();\n    if (fullReset === true) {\n      this.reset();\n    } else {\n      this.makeGraph();\n    }\n    this._renderer.refresh();\n  }\n\n  ngAfterViewInit() {\n  }\n\n  // scale = 1 / ( 2^zoom )\n  // 1 / scale = 2^zoom\n  // log2(1/scale) = zoom\n  scale() : number {\n    const loc = this._seqTrip.location();\n    return Math.log2(1 / loc.scale);\n  }\n  setScale(s: number) {\n    const renderer = this._renderer;\n    if (!renderer) {\n      return;\n    }\n    const loc = renderer.getLocation();\n    loc.scale =  1 / Math.pow(2, s);\n    renderer.setLocation(loc);\n    this._seqTrip.setLocation(this._renderer.getLocation());\n    this.modified(ModificationEvent.Location);\n    \n    if (this._scaleChangeTimeout) {\n      clearTimeout(this._scaleChangeTimeout);\n    }\n    this._scaleChangeTimeout = setTimeout(() => {\n      this.placeLabels();\n    }, 800);\n  }\n\n  prepareCanvas() {\n    if (!this.canvas || !this.canvas.nativeElement || this._renderer) {\n      return;\n    }\n\n    this._renderer = new T.CanvasTilesRenderer({\n      canvas: this.canvas.nativeElement,\n      url: 'https://tiles.wmflabs.org/bw-mapnik/$scale/$x/$y.png',\n      initialLocation: { x: 0.5196633492226737, y: 0.2519760172389177, scale: 0.0814},\n      onLocationChange: (renderer: CanvasTilesRenderer) => {\n          if (!this._loadingMap) {\n            this.modified(ModificationEvent.Location);\n            this._seqTrip.setLocation(renderer.getLocation());\n          }\n      }\n    });\n\n    this._worldLayer = new WorldBackgroundLayer({\n      renderer: this._renderer,\n      onCountryClic: (country) => {\n        this._editor.deselectLabel();\n        this.selectCountry(country.id);\n      },\n      onSeaClic: () => {\n        this._editor.deselectLabel();\n        this.selectCountry('');\n      },\n      landColor: '',\n      borderColor: '',\n      seaColor: '',\n      showRivers: false,\n      countryStyle: {}\n    });\n    this._renderer.layers[0] = this._worldLayer;\n\n    this._tripLayer = new TripGraphLayer({\n      renderer: this._renderer,\n      graph: this._graph\n    });\n    this._renderer.addLayer(this._tripLayer);\n\n    // setTimeout is necessary to restart an angular check cycle.\n    // In ngAfterViewInit, we're not supposed to change the state.\n    setTimeout(() => {\n      this.clearSelection();\n      this._editor = new TripGraphEditor(this._renderer, this._graph);\n      this._renderer.pinchZoom.touchEventHandlers.push(this._editor);\n      this._editor.onLabelMoved = (a) => { this.modified(ModificationEvent.LabelMoved); };\n      this._editor.onBezierMoved = (a) => { this.modified(ModificationEvent.CurveMoved); };\n\n      this._editor.onLabelSelect = (node: TripNode) => {\n        this.selectNode(node);\n      };\n      this._editor.onBezierSelect = (bezier: {edge: TripEdge}) => {\n        if (bezier) {\n          this.selectEdge(bezier.edge);\n        } else {\n          this.clearSelection();\n        }\n      };\n\n      this.pushSeqTripToCanvas();\n    }, 10);\n\n  }\n\n  mapIsLocked() : boolean {\n    return this._renderer && this._renderer.pinchZoom && this._renderer.pinchZoom.locked;\n  }\n\n  lockMap(lock : boolean) {\n    if (this._renderer && this._renderer.pinchZoom) {\n      this._renderer.pinchZoom.locked = lock && this._autoLockMap;\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._autoRefresh) {\n      clearInterval(this._autoRefresh);\n    }\n  }\n\n  clearSelection() {\n    this._selectedCountry = undefined;\n    this._selectedNode = undefined;\n    this._selectedEdge = undefined;\n  }\n\n  clearAndSaveSelection() : Selection {\n    const sel : Selection = {\n      _selectedCountry: this._selectedCountry,\n      _selectedNode: this._selectedNode,\n      _selectedEdge: this._selectedEdge\n    };\n    this.clearSelection();\n    return sel;\n  }\n\n  restoreSelection(sel : Selection) {\n    this._selectedCountry = sel._selectedCountry;\n    this._selectedNode = sel._selectedNode;\n    this._selectedEdge = sel._selectedEdge;\n  }\n\n  selectCountry(country?: string) {\n    this.clearSelection();\n    this._selectedCountry = country;\n    this.setCountryColor(country, this.countryColor(country));\n  }\n\n  setCountryColor(country: string, c: string) {\n    if (!country) {\n      return;\n    }\n\n    const wantsDefault = (c == 'default');\n\n    let modified = false;\n    let countryStyle = this._worldLayer.params.countryStyle[country];\n    if (countryStyle) {\n      if (!wantsDefault) {\n        modified = countryStyle.color !== c;\n        countryStyle.color = c;\n      } else {\n        modified = !!countryStyle.color;\n        delete countryStyle.color;\n        if (Object.keys(countryStyle).length == 0) {\n          delete  this._worldLayer.params.countryStyle[country];\n        }\n      }\n    } else {\n      if (!wantsDefault) {\n        modified = true;\n        countryStyle = this._worldLayer.params.countryStyle[country] = {\n          color: c\n        };\n      }\n    }\n    if (modified) {\n      this.modified(ModificationEvent.MapColor);\n    }\n  }\n\n  countryColor(country: string) {\n    if (this._worldLayer\n        && this._worldLayer.params.countryStyle[country]\n        && this._worldLayer.params.countryStyle[country].color) {\n      return this._worldLayer.params.countryStyle[country].color;\n    }\n    return this._seqTrip.landColor();\n  }\n\n  tunedCountries() : string[] {\n    if (this._worldLayer) {\n      return Object.keys(this._worldLayer.params.countryStyle);\n    } else {\n      return [];\n    }\n  }\n\n  selectNode(node: TripNode) {\n    this.clearSelection();\n\n    if (node) {\n      if (!node.properties) {\n        node.properties = { };\n      }\n      if (node.name in this._graph.nodes) {\n        this._selectedNode = this._graph.nodes[node.name];\n      }\n\n      if (node !== this._editor.selectedLabel) {\n        const savedCallback = this._editor.onLabelSelect;\n        const savedBezierCallback = this._editor.onBezierSelect;\n        this._editor.onLabelSelect = () => {};\n        this._editor.onBezierSelect = () => {};\n        if (node.name in this._editor.graph.nodes) {\n          this._editor.selectLabel(node);\n        } else {\n          this._editor.deselectLabel();\n        }\n        this._editor.onLabelSelect = savedCallback;\n        this._editor.onBezierSelect = savedBezierCallback;\n      }\n    }\n  }\n\n  selectEdge(edge: TripEdge) {\n    this.clearSelection();\n    this._selectedEdge = edge;\n  }\n\n  nodeNames(): string[] {\n    return Object.keys(this._graph.nodes);\n  }\n\n  nodeArray(): TripNode[] {\n    const r: TripNode[] = [];\n    for (let k of Object.keys(this._graph.nodes)) {\n      r.push(this._graph.nodes[k]);\n    }\n    return r;\n  }\n\n  isSkipped(node: TripNode): boolean {\n    if (!node.properties || node.properties.skip === undefined) {\n      return false;\n    }\n    return node.properties.skip;\n  }\n\n  toggleHideEdge(edge: TripEdge) {\n    if (edge.properties.hidden) {\n      delete edge.properties.hidden;\n\n      for (let node of this._visitedPlaceList) {\n        if ((node.name == edge.from || node.name == edge.to)\n            && this.isSkipped(node)) {\n          this.toggleSkipNode(node);\n        }\n      }\n    } else {\n      edge.properties.hidden = true;\n    }\n    this.modified(ModificationEvent.Edge);\n  }\n\n  toggleSkipNode(node: TripNode) {\n    if (this.isSkipped(node)) {\n      delete node.properties.skip;\n    } else {\n      if (!node.properties) {\n        node.properties = { skip: true };\n      } else {\n        node.properties.skip = true;\n      }\n      for (let edge of this._stages) {\n        if (edge.from == node.name || edge.to == node.name) {\n          edge.properties.hidden = true;\n        }\n      }\n    }\n    this._seqTrip.markFirstLocation();\n    this.modified(ModificationEvent.Node);\n  }\n\n  toggleProperty(node: TripNode, property: string) {\n    node.properties[property] = !node.properties[property];\n    this.modified(ModificationEvent.Node);\n  }\n\n  setProperty(node: TripNode, property: string, value: any, ev: any) {\n    if (value !== undefined) {\n      node.properties[property] = value;\n    } else {\n      if (property in node.properties) {\n        delete node.properties[property];\n      }\n    }\n    this._seqTrip.markFirstLocation();\n    this.modified(ModificationEvent.NodeStyle);\n  }\n\n  setNodeLabel(node: TripNode, newLabel: string) {\n    const oldLabel = node.label;\n    if (oldLabel === newLabel) {\n      return;\n    }\n    node.label = newLabel;\n    const graph = this._graph;\n    for (let i in graph.nodes) {\n      let n = graph.nodes[i];\n      if (n.place === node || n.allPlaces.indexOf(node) >= 0) {\n        n.label = n.label.replace(oldLabel, newLabel);\n      }\n    }\n    this.modified(ModificationEvent.Label);\n  }\n\n  removeEdge(edge: TripEdge) {\n    const compareEdges =\n      (e: TripEdge) => e.from !== edge.from || e.to !== edge.to;\n\n    this._graph.edges = this._graph.edges.filter(compareEdges);\n    this._editor.graph.edges = this._editor.graph.edges.filter(compareEdges);\n  }\n\n  uiSetFrame(width?: number, height?: number) {\n    this.setFrame(width, height);\n    this.modified(ModificationEvent.Frame);\n    this.autoPlaceLabels();\n  }\n\n  setFrame(width?: number, height?: number) {\n    if (!this._renderer) {\n      return;\n    }\n    const canvas = this._renderer.canvas;\n    const w = width || canvas.width;\n    const h = height || canvas.height;\n    const newLocation = this._graph.location(w / h, 1.2);\n    this._seqTrip.setLocation(newLocation);\n    this._renderer.setLocation(newLocation);\n  }\n\n  autoPlaceLabels() {\n    this._seqTrip.clearUserPlacements();\n    this.placeLabels();\n  }\n\n  placeLabels() {\n    this.runBlockingTask((done: () => void) => {\n      this._tripLayer.placeLabels(this._renderer.canvas.getContext('2d'));\n      this._seqTrip.saveUserPlacements();\n      this.modified(ModificationEvent.LabelMoved);\n      this._renderer.refresh();\n      done();\n    });\n  }\n\n  runBlockingTask(task:(done: () => void) => void) {\n    this._showSpinner = true;\n\n    // make sure the interface updates\n    setTimeout(() => {\n      try {\n        task(() => { this._showSpinner = false; });\n      } catch (err) {\n        // make sure to hide the spinner even if there is an exception\n        this._showSpinner = false;\n        console.log(err);\n      }\n    }, 30);\n  }\n\n  update() {\n    this.placeLabels();\n  }\n\n  resetCurves() {\n    const graph = this._graph;\n\n    graph.createDefaultBezier();\n    this._tripLayer.graph = this._tripLayer.makeFusedGraph(graph);\n    this._editor.graph = this._tripLayer.graph;\n\n    this._tripLayer.placeLabels(this._renderer.canvas.getContext('2d'));\n    this._renderer.refresh();\n  }\n\n  makeGraph() {\n    this._graph =\n      this._seqTrip.makeGraph(this._tripLayer);\n    if (this._tripLayer) {\n      this._tripLayer.graph = this._graph;\n      this._tripLayer.loadIcons((err) => { this._renderer.refresh(); });\n    }\n    if (this._editor) {\n      this._editor.graph = this._graph;\n    }\n  }\n\n  recreate() {\n    if (this._visitedPlaceList.length) {\n      this.makeGraph();\n      this.placeLabels();\n    }\n  }\n\n  reset() {\n    if (this._visitedPlaceList.length) {\n      this.makeGraph();\n      this.setFrame();\n      this.placeLabels();\n    }\n  }\n\n  uiSetPageSize(pageSizeName: string, placeLabels?: boolean) {\n    this.setPageSize(pageSizeName, placeLabels);\n    this.modified(ModificationEvent.PageSize);\n  }\n\n  setPageSize(pageSizeName: string, placeLabels?: boolean) {\n    const pageSize = this._pageSizeMap[pageSizeName];\n    if (pageSize) {\n      this._pageSizeName = pageSizeName;\n      this._canvasWidth = pageSize.widthPt();\n      this._canvasHeight = pageSize.heightPt();\n      this._seqTrip.setSize(pageSize.name, pageSize.width_mm, pageSize.height_mm);\n      if (placeLabels !== false) {\n        this.setFrame(this._canvasWidth, this._canvasHeight);\n        setTimeout(() => { this.placeLabels(); }, 20);\n      }\n    }\n  }\n\n  setSeaColor(c: string) {\n    if (c != this._seqTrip.seaColor()) {\n      this._seqTrip.setSeaColor(c);\n      this._worldLayer.params.seaColor = c;\n      this.modified(ModificationEvent.MapColor);\n    }\n  }\n  setBorderColor(c: string) {\n    if (c != this._seqTrip.borderColor()) {\n      this._seqTrip.setBorderColor(c);\n      this._worldLayer.params.borderColor = c;\n      this.modified(ModificationEvent.MapColor);\n    }\n  }\n  setLandColor(c: string) {\n    if (c != this._seqTrip.landColor()) {\n      this._seqTrip.setLandColor(c);\n      this._worldLayer.params.landColor = c;\n      this.modified(ModificationEvent.MapColor);\n    }\n  }\n  toggleShowRiver() {\n    this._seqTrip.toggleShowRiver();\n    this._worldLayer.params.showRivers = this._seqTrip.showRivers();\n    this.modified(ModificationEvent.MapColor);\n  }\n\n  fetchMap() : Promise<any> {\n    return new Promise((resolve, reject) => {\n    $.getJSON(\n        thisTripApi.mapUrl,\n        (data: any) => {\n          resolve(data);\n        },\n        (err: any) => { reject(err); });\n    });\n  }\n\n  /* The data flow is the following:\n   *\n   * existing map?\n   *   yes => update with locations, done.\n   *   no => #locations > 0 ?\n   *     no => ask the user to populate the field\n   *     yes => generate a new map from locations, save it.\n   */\n  loadMap() {\n    this._loadingMap = true;\n    this.fetchMap().then((data) => {\n        try {\n          this._seqTrip.load(data);\n          this._saved = true;\n          this._visitedPlaceList = this._seqTrip.places();\n          this._stages = this._seqTrip.stages();\n          this._interleaved = this.interleavedPlacesAndEvents();\n          this.prepareCanvas();\n\n          return this.fetchLocations().then((locations) => {\n              this.updateWithLocations(locations);\n          }).catch((err) => { this._loadingMap = false; this.handleError(err); });\n        } catch(e) {\n          return this.fetchLocationsAndGenerateMap();\n        }\n      })\n    .then(() => {\n      // Canvas rendering might soon refresh and trigger a location change event.\n      // Let it do its job, and then stop ignoring events.\n      setTimeout(() => { this._loadingMap = false; }, 100);\n    })\n    .catch((err) => {\n      this._loadingMap = false;\n      this.handleError(err);\n     });\n  }\n\n  fetchLocationsAndGenerateMap() {\n    return this.fetchLocations()\n      .then((locations) => {\n        if (locations.length > 0) {\n          this.generateFromLocations(locations);\n          this.prepareCanvas();\n        }\n      })\n  }\n\n  saveMap() {\n    const sel = this.clearAndSaveSelection();\n    if (this._editor) {\n      this._editor.deselectLabel();\n    }\n    // before we can save, we have to propagate edge edits in the graph to _seqTrip.\n    // TODO: improve the design for that.\n    if (this._graph) {\n      for (let e of this._graph.edges) {\n        e.propagateToOriginal();\n      }\n    }\n    $.ajax({\n        type: 'PUT',\n        url: thisTripApi.mapUrl,\n        dataType: 'text',\n        contentType: \"application/json\",\n        data: JSON.stringify({ _method: 'PUT', map_data: JSON.stringify(this._seqTrip.save()) }),\n        success: () => { this._saved = true; this._errorMessage = undefined; },\n        error: (jqXHR: any, textStatus: string, errorThrown: string ) => {\n          this.handleError(\"Error: Can't save map. Please check your internet connection.\");\n        }\n    });\n\n    this.restoreSelection(sel);\n  }\n\n  private handleError (error: any) {\n    // In a real world app, we might use a remote logging infrastructure\n    let errMsg: string = '' + error;\n    console.error(errMsg);\n    this._infoMessage = undefined;\n    this._errorMessage = errMsg;\n  }\n\n  nodePropertiesChanged() {\n    this.modified(ModificationEvent.LabelProperties)\n    this.modified(ModificationEvent.NodeStyle)\n  }\n\n  edgePropertiesChanged(edge?: TripEdge) {\n    this.modified(ModificationEvent.EdgeProperties)\n  }\n\n  modified(what: ModificationEvent) {\n    if (this._loadingMap) {\n      return;\n    }\n\n    this._saved = false;\n    switch (what) {\n      case ModificationEvent.LabelMoved:\n      case ModificationEvent.CurveMoved:\n      case ModificationEvent.Location:\n        // no need to refresh: the canvas takes care of it.\n        break;\n\n      case ModificationEvent.NodeStyle:\n      case ModificationEvent.Label:\n      case ModificationEvent.LabelProperties:\n      case ModificationEvent.EdgeProperties:\n      case ModificationEvent.MapColor:\n        this._renderer.refreshIfNotMoving();\n        break;\n\n      case ModificationEvent.Node:\n      case ModificationEvent.Edge:\n      case ModificationEvent.Frame:\n        // replace labels, but preserve map frame\n        this.recreate();\n        break;\n\n      case ModificationEvent.PageSize:\n        // set page size already resets everything, including map frame\n        break;\n    }\n\n    if (this._saveTimeout) {\n      clearTimeout(this._saveTimeout);\n    }\n    this._saveTimeout = setTimeout(() => {\n        if (!this._loadingMap) { this.saveMap(); }\n      }, 500);\n  }\n\n  interleavedPlacesAndEvents() {\n    const result : EdgeOrNode[] = [];\n    const edgeStart : { [id: string] : { [id: string] : TripEdge } } = this._seqTrip.stagesAsDict();\n    const placesShown : { [id: string] : TripNode } = {};\n\n    const places = this._visitedPlaceList;\n\n    const addPlace = (p : TripNode) => {\n      if (p.dbid in placesShown) {\n        result.push({ node: placesShown[p.dbid] });\n      } else {\n        placesShown[p.dbid] = p;\n        result.push({ node: p });\n      }\n    };\n\n    const numStages = places.length - 1;\n    for (let i = 0; i < places.length; ++i) {\n      const p = places[i];\n      let toDbId;\n     \n      if (i < numStages) {\n         toDbId = places[i + 1].dbid;\n\n        if (p.dbid === toDbId) {\n          continue;\n        }\n      }\n\n      addPlace(p);\n\n      if (toDbId !== undefined) {\n        if (p.dbid in edgeStart && toDbId in edgeStart[p.dbid]) {\n          result.push({ edge: edgeStart[p.dbid][toDbId] });\n        } else {\n          console.log('No edge from ' + p.dbid + ' to ' + toDbId);\n        }\n      }\n    }\n\n    return result;\n  }\n\n  download(format) {\n    const randomString = (length) => \n      Math.round((Math.pow(36, length + 1) - Math.random() * Math.pow(36, length))).toString(36).slice(1);\n    \n    const key = randomString(16);\n    const url = this.cssserviceUrl + 'mapgen/' + key;\n    const pdfUrl = url + '/' + format;\n\n    let headers = new Headers({ 'content-type': 'application/json' });\n    let options = new RequestOptions({ headers: headers });\n    this.http.post(url, JSON.stringify(this._seqTrip.save()), options)\n      .subscribe(\n        response => {\n          window.open(pdfUrl);\n        },\n        error => {\n          this.handleError(error.text());\n        }\n      );\n  }\n\n  resetNodeToDefault(node : TripNode) {\n    for (let field of Object.keys(node.properties)) {\n      if (field != 'firstVisited') {\n        delete node.properties[field];\n      }\n    }\n    this._seqTrip.markFirstLocation();\n    this.modified(ModificationEvent.Node);\n  }\n\n  @HostListener('window:beforeunload', ['$event'])\n  doSomething($event) {\n    if(!this._loadingMap && this._numLocations > 0 && !this._saved) {\n      $event.returnValue='Your data will be lost!';\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-map.component.ts","import {Point, IPoint } from './point';\nimport { BoundingBox } from './bounding-box';\n\nexport interface TripNodeProperties {\n  point?: boolean;\n  leaderLine?: string;\n  dashed?: number[];\n  leaderLineWidth?: number;\n  maxLeaderLineLength?: number;\n  labelBbox?: BoundingBox;\n  radius?: number;\n  leaderLineAnchor?: Point;\n  labelColor?: string;\n  labelCoord?: Point;\n  userPlacement?: Point;\n  frame?: string;\n  leaderLineColor?: string;\n  fontSize?: number;\n  font?: string;\n  stroke?: string;\n  haloWidth?: number;\n  fill?: string;\n  textOffset?: number;\n  textPlacement?: string;\n  skip?: boolean;\n  landing?: boolean;\n  takeoff?: boolean;\n  markStyle?: string;\n  firstVisited?: boolean;\n}\n\nexport interface ITripNode {\n  coord: IPoint | number[];\n  dbid?: number;\n  name?: string;\n  label?: string;\n  labelIcon?: {\n    url: string;\n    width?: number;\n    height?: number;\n    autorotate?: number;\n    angle?: number;\n    ratioX?: number;\n    ratioY?: number;\n  };\n  properties?: TripNodeProperties;\n\n  viewerPos?: Point;\n  place?: TripNode;\n}\n\nexport class TripNode implements ITripNode {\n  coord: Point;\n  dbid?: number;\n  name?: string;\n  label?: string;\n  labelIcon?: {\n    url: string;\n    width?: number;\n    height?: number;\n    autorotate?: number;\n    angle?: number;\n    ratioX?: number;\n    ratioY?: number;\n  };\n  properties?: TripNodeProperties;\n\n  viewerPos?: Point;\n  place?: TripNode;\n  allPlaces: TripNode[];\n\n  constructor() {\n    this.allPlaces = [];\n  };\n\n  static parse(obj: any): TripNode {\n    const r = new TripNode();\n    r.coord = new Point(obj.coord);\n    if (obj.place) {\n      obj.place = TripNode.parse(obj.place);\n    }\n    if (obj.viewerPos) {\n      r.viewerPos = new Point(obj.viewerPos);\n    }\n    for (let m of ['dbid', 'name', 'label', 'labelIcon', 'properties']) {\n      if (obj[m]) {\n        r[m] = obj[m];\n      }\n    }\n    if (!r.name) {\n      if (r.dbid !== undefined) {\n        r.name = '' + r.dbid;\n      } else if (r.label) {\n        r.name = r.label;\n      }\n    }\n\n    if (r.properties) {\n      if (r.properties.labelBbox) {\n        r.properties.labelBbox = new BoundingBox(r.properties.labelBbox);\n      }\n      if (r.properties.leaderLineAnchor) {\n        r.properties.leaderLineAnchor = new Point(r.properties.leaderLineAnchor);\n      }\n      if (r.properties.labelCoord) {\n        r.properties.labelCoord = new Point(r.properties.labelCoord);\n      }\n    } else {\n      r.properties = { };\n    }\n    return r;\n  }\n\n  isSkipped():boolean {\n    if (this.label\n        && (!this.properties || this.properties.skip === undefined)) {\n      return false;\n    }\n    return this.properties.skip;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/app/trip-map/trip-node.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/environments/environment.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { enableProdMode } from '@angular/core';\nimport { environment } from './environments/environment';\nimport { AppModule } from './app/app.module';\n\nif (true || environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// /Users/stephanemartignier/Dev/jpmguides/destinationbook-server/frontend/map_editor/src/main.ts"],"sourceRoot":"webpack:///"}